var chavo;!function(chavo){"use strict";var MainController=function(){function MainController(){}return MainController}();chavo.MainController=MainController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainController=function(){function MainController(){}return MainController}();chavo.MainController=MainController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainAllController=function(){function MainAllController($scope,$rootScope,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.cfpLoadingBar=cfpLoadingBar,this.voices=new Array;var parseVoices,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);cfpLoadingBar.start(),query.descending("createdAt"),query.find({success:function(){},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.Promise.when(promises)}).then(function(){parseVoices.forEach(function(voice){var myLikes=$rootScope.currentUser.get("likes")||[];_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()},function(){var myLikes=$rootScope.currentUser.get("likes")||[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()})}return MainAllController.$inject=["$scope","$rootScope","cfpLoadingBar"],MainAllController.prototype.toggleLike=function(voice){Parse.Cloud.run("toggleLike",{voice:voice},{success:function(likeCount){voice.likeCount=likeCount},error:function(error){console.error("Error: "+error.code+" "+error.message)}})},MainAllController}();chavo.MainAllController=MainAllController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainAllController=function(){function MainAllController($scope,$rootScope,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.cfpLoadingBar=cfpLoadingBar,this.voices=new Array;var parseVoices,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);cfpLoadingBar.start(),query.descending("createdAt"),query.find({success:function(){},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.Promise.when(promises)}).then(function(){parseVoices.forEach(function(voice){var myLikes=$rootScope.currentUser.get("likes")||[];_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()},function(){var myLikes=$rootScope.currentUser.get("likes")||[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()})}return MainAllController.prototype.toggleLike=function(voice){Parse.Cloud.run("toggleLike",{voice:voice},{success:function(likeCount){voice.likeCount=likeCount},error:function(error){console.error("Error: "+error.code+" "+error.message)}})},MainAllController}();chavo.MainAllController=MainAllController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainMyPostsController=function(){function MainMyPostsController($scope,$rootScope,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.cfpLoadingBar=cfpLoadingBar,this.voices=new Array;var parseVoices,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);cfpLoadingBar.start(),query.descending("createdAt"),query.equalTo("user",Parse.User.current()),query.find({success:function(){},error:function(error){alert("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.Promise.when(promises)}).then(function(){var myLikes=$rootScope.currentUser.get("likes")||[];parseVoices.forEach(function(voice){_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()},function(){var myLikes=$rootScope.currentUser.get("likes")||[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()})}return MainMyPostsController.$inject=["$scope","$rootScope","cfpLoadingBar"],MainMyPostsController}();chavo.MainMyPostsController=MainMyPostsController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainMyPostsController=function(){function MainMyPostsController($scope,$rootScope,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.cfpLoadingBar=cfpLoadingBar,this.voices=new Array;var parseVoices,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);cfpLoadingBar.start(),query.descending("createdAt"),query.equalTo("user",Parse.User.current()),query.find({success:function(){},error:function(error){alert("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.Promise.when(promises)}).then(function(){var myLikes=$rootScope.currentUser.get("likes")||[];parseVoices.forEach(function(voice){_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()},function(){var myLikes=$rootScope.currentUser.get("likes")||[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice.id,voice.get("description"),voice.get("author"),voice.get("ageYears")&&voice.get("ageMonths")?voice.get("ageYears")+"歳"+voice.get("ageMonths")+"ヶ月":"",0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",voice.get("user").get("username"),void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),myLikes.indexOf(voice.id)>=0?!0:!1,voice.get("likeCount"),moment(voice.createdAt).format("YYYY/MM/DD").toString()))}),cfpLoadingBar.complete(),_this.$scope.$apply()})}return MainMyPostsController}();chavo.MainMyPostsController=MainMyPostsController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainComposeController=function(){function MainComposeController($scope,$state){var _this=this;this.$scope=$scope,this.$state=$state,this.children=new Array,this.genderList=[{label:"男の子",value:0},{label:"女の子",value:1},{label:"非表示",value:2}],this.voiceIsPublic=!1,this.disableInput=!1;var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday")))})})})}return MainComposeController.$inject=["$scope","$state"],MainComposeController.prototype.onSelectVoiceAuthor=function(child){this.voiceAuthor=angular.copy(child)},MainComposeController.prototype.clearVoiceAuthor=function(){this.voiceAuthor=null},MainComposeController.prototype.submit=function(){var _this=this;this.disableInput=!0;var ParseVoice=Parse.Object.extend("Voice"),voice=new ParseVoice;voice.set("description",this.voice.description),voice.set("gender",this.voiceAuthor.gender),voice.set("author",this.voiceAuthor.nickName),voice.set("ageYears",this.voiceAuthor.ageYears),voice.set("ageMonths",this.voiceAuthor.ageMonths),voice.set("user",Parse.User.current());var voiceACL=new Parse.ACL(Parse.User.current());this.voiceIsPublic&&voiceACL.setPublicReadAccess(!0),voice.setACL(voiceACL),voice.save({error:function(voice,error){console.log("Error: "+error.code+" "+error.message)}}).then(function(){console.log("ほぞんしました"),_this.$state.go("home.all")},function(error){console.error("投稿送信時エラー: "+error.code+" "+error.message),_this.alertMsg="送信に失敗しました...時間をおいてためしてください。",_this.disableInput=!1,_this.$scope.$apply()})},MainComposeController}();chavo.MainComposeController=MainComposeController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainComposeController=function(){function MainComposeController($scope,$state){var _this=this;this.$scope=$scope,this.$state=$state,this.children=new Array,this.genderList=[{label:"男の子",value:chavo.GENDER.MALE},{label:"女の子",value:chavo.GENDER.FEMALE},{label:"非表示",value:chavo.GENDER.OTHER}],this.voiceIsPublic=!1,this.disableInput=!1;var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday")))})})})}return MainComposeController.prototype.onSelectVoiceAuthor=function(child){this.voiceAuthor=angular.copy(child)},MainComposeController.prototype.clearVoiceAuthor=function(){this.voiceAuthor=null},MainComposeController.prototype.submit=function(){var _this=this;this.disableInput=!0;var ParseVoice=Parse.Object.extend("Voice"),voice=new ParseVoice;voice.set("description",this.voice.description),voice.set("gender",this.voiceAuthor.gender),voice.set("author",this.voiceAuthor.nickName),voice.set("ageYears",this.voiceAuthor.ageYears),voice.set("ageMonths",this.voiceAuthor.ageMonths),voice.set("user",Parse.User.current());var voiceACL=new Parse.ACL(Parse.User.current());this.voiceIsPublic&&voiceACL.setPublicReadAccess(!0),voice.setACL(voiceACL),voice.save({error:function(voice,error){console.log("Error: "+error.code+" "+error.message)}}).then(function(){console.log("ほぞんしました"),_this.$state.go("home.all")},function(error){console.error("投稿送信時エラー: "+error.code+" "+error.message),_this.alertMsg="送信に失敗しました...時間をおいてためしてください。",_this.disableInput=!1,_this.$scope.$apply()})},MainComposeController}();chavo.MainComposeController=MainComposeController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var LoginController=function(){function LoginController($scope,$rootScope,$state,$location,AuthService,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$location=$location,this.AuthService=AuthService,this.$q=$q,this.FacebookService=FacebookService,this.showResetPwMessage=!1}return LoginController.$inject=["$scope","$rootScope","$state","$location","AuthService","$q","FacebookService"],LoginController.prototype.signUp=function(form){var _this=this;this.AuthService.signUp(form,{success:function(){_this.$state.go("home.all")},error:function(user,error){alert("Unable to sign up:  "+error.code+" "+error.message)}})},LoginController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},LoginController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},LoginController.prototype.requestPasswordReset=function(formData){var _this=this;this.AuthService.requestPasswordReset(formData,{success:function(){_this.showResetPwMessage=!0,_this.$state.go("login")},error:function(error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},LoginController.prototype.logOut=function(){this.AuthService.logOut()},LoginController}();chavo.LoginController=LoginController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var LoginController=function(){function LoginController($scope,$rootScope,$state,$location,AuthService,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$location=$location,this.AuthService=AuthService,this.$q=$q,this.FacebookService=FacebookService,this.showResetPwMessage=!1}return LoginController.prototype.signUp=function(form){var _this=this;this.AuthService.signUp(form,{success:function(){_this.$state.go("home.all")},error:function(user,error){alert("Unable to sign up:  "+error.code+" "+error.message)}})},LoginController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},LoginController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},LoginController.prototype.requestPasswordReset=function(formData){var _this=this;this.AuthService.requestPasswordReset(formData,{success:function(){_this.showResetPwMessage=!0,_this.$state.go("login")},error:function(error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},LoginController.prototype.logOut=function(){this.AuthService.logOut()},LoginController}();chavo.LoginController=LoginController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsMenuController=function(){function SettingsMenuController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope,this.menus=[{title:"プロフィール",route:"settings.profile"},{title:"こどもの情報",route:"settings.children"}]}return SettingsMenuController.$inject=["$scope","$rootScope"],SettingsMenuController.prototype.isActive=function(menuName){return menuName===this.activeMenu},SettingsMenuController}();chavo.SettingsMenuController=SettingsMenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsMenuController=function(){function SettingsMenuController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope,this.menus=[{title:"プロフィール",route:"settings.profile"},{title:"こどもの情報",route:"settings.children"}]}return SettingsMenuController.prototype.isActive=function(menuName){return menuName===this.activeMenu},SettingsMenuController}();chavo.SettingsMenuController=SettingsMenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsContentController=function(){function SettingsContentController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope}return SettingsContentController.$inject=["$scope","$rootScope"],SettingsContentController}();chavo.SettingsContentController=SettingsContentController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsContentController=function(){function SettingsContentController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope}return SettingsContentController}();chavo.SettingsContentController=SettingsContentController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsChildrenController=function(){function SettingsChildrenController($scope,$rootScope,$state,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.children=new Array;var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);cfpLoadingBar.start(),query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);cfpLoadingBar.complete(),_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday")))})})})}return SettingsChildrenController.$inject=["$scope","$rootScope","$state","cfpLoadingBar"],SettingsChildrenController.prototype.go=function(child){child=child?child:new chavo.Child,this.$rootScope.targetChild=child,this.$state.go("settings.child",{childId:child.dispOrder})},SettingsChildrenController}();chavo.SettingsChildrenController=SettingsChildrenController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsChildrenController=function(){function SettingsChildrenController($scope,$rootScope,$state,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.children=new Array;var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);cfpLoadingBar.start(),query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);cfpLoadingBar.complete(),_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday")))})})})}return SettingsChildrenController.prototype.go=function(child){child=child?child:new chavo.Child,this.$rootScope.targetChild=child,this.$state.go("settings.child",{childId:child.dispOrder})},SettingsChildrenController}();chavo.SettingsChildrenController=SettingsChildrenController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsChildController=function(){function SettingsChildController($scope,$rootScope,$state,$stateParams){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,console.log(this.$rootScope.targetChild),this.initBirthday(),this.birthYears=new Array;for(var i=1900;i<=moment().year();i++)this.birthYears.push(i);for(this.birthMonths=[1,2,3,4,5,6,7,8,9,10,11,12],this.birthDates=new Array,i=1;31>=i;i++)this.birthDates.push(i)}return SettingsChildController.$inject=["$scope","$rootScope","$state","$stateParams"],SettingsChildController.prototype.saveChildData=function(){var _this=this;if(this.$rootScope.targetChild.dispOrder>0){var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.equalTo("dispOrder",this.$rootScope.targetChild.dispOrder),query.first().then(function(child){return child.set("dispOrder",_this.$rootScope.targetChild.dispOrder),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました")})}else{var dispOrder=0;ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild),query.descending("dispOrder"),query.first({success:function(result){result&&result.get("dispOrder")&&(dispOrder=result.get("dispOrder"))},error:function(error){alert("Error: "+error.code+" "+error.message)}}).then(function(){var child=new ParseChild;return child.set("dispOrder",dispOrder+1),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.setACL(new Parse.ACL(Parse.User.current())),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました")})}},SettingsChildController.prototype.initBirthday=function(){this.$rootScope.targetChild.unableBirthday?(this.yearSelected=null,this.monthSelected=null,this.dateSelected=null):this.setBirthday()},SettingsChildController.prototype.getInputBirthday=function(){return this.$rootScope.targetChild.unableBirthday?null:moment({year:this.yearSelected,months:this.monthSelected,date:this.dateSelected}).toDate()},SettingsChildController.prototype.setBirthday=function(){var momentObj=this.$rootScope.targetChild&&this.$rootScope.targetChild.birthday?moment(this.$rootScope.targetChild.birthday):moment();this.yearSelected=momentObj.year(),this.monthSelected=momentObj.month(),this.dateSelected=momentObj.date()},SettingsChildController}();chavo.SettingsChildController=SettingsChildController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsChildController=function(){function SettingsChildController($scope,$rootScope,$state,$stateParams){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,console.log(this.$rootScope.targetChild),this.initBirthday(),this.birthYears=new Array;for(var i=1900;i<=moment().year();i++)this.birthYears.push(i);for(this.birthMonths=[1,2,3,4,5,6,7,8,9,10,11,12],this.birthDates=new Array,i=1;31>=i;i++)this.birthDates.push(i)}return SettingsChildController.prototype.saveChildData=function(){var _this=this;if(this.$rootScope.targetChild.dispOrder>0){var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.equalTo("dispOrder",this.$rootScope.targetChild.dispOrder),query.first().then(function(child){return child.set("dispOrder",_this.$rootScope.targetChild.dispOrder),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました")})}else{var dispOrder=0;ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild),query.descending("dispOrder"),query.first({success:function(result){result&&result.get("dispOrder")&&(dispOrder=result.get("dispOrder"))},error:function(error){alert("Error: "+error.code+" "+error.message)}}).then(function(){var child=new ParseChild;return child.set("dispOrder",dispOrder+1),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.setACL(new Parse.ACL(Parse.User.current())),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました")})}},SettingsChildController.prototype.initBirthday=function(){this.$rootScope.targetChild.unableBirthday?(this.yearSelected=null,this.monthSelected=null,this.dateSelected=null):this.setBirthday()},SettingsChildController.prototype.getInputBirthday=function(){return this.$rootScope.targetChild.unableBirthday?null:moment({year:this.yearSelected,months:this.monthSelected,date:this.dateSelected}).toDate()},SettingsChildController.prototype.setBirthday=function(){var momentObj=this.$rootScope.targetChild&&this.$rootScope.targetChild.birthday?moment(this.$rootScope.targetChild.birthday):moment();this.yearSelected=momentObj.year(),this.monthSelected=momentObj.month(),this.dateSelected=momentObj.date()},SettingsChildController}();chavo.SettingsChildController=SettingsChildController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var NavbarController=function(){function NavbarController($scope,$rootScope,AuthService,$state,$location,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$location=$location,this.$q=$q,this.FacebookService=FacebookService}return NavbarController.$inject=["$scope","$rootScope","AuthService","$state","$location","$q","FacebookService"],NavbarController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},NavbarController.prototype.logOut=function(){this.AuthService.logOut()},NavbarController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},NavbarController}();chavo.NavbarController=NavbarController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var NavbarController=function(){function NavbarController($scope,$rootScope,AuthService,$state,$location,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$location=$location,this.$q=$q,this.FacebookService=FacebookService}return NavbarController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},NavbarController.prototype.logOut=function(){this.AuthService.logOut()},NavbarController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},NavbarController}();chavo.NavbarController=NavbarController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var TabmenuController=function(){function TabmenuController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope,this.tabs=[{heading:"みんなの",route:"home.all"},{heading:"あなたの",route:"home.myposts",disabled:!1},{heading:'<i class="fa fa-pencil"></i>',route:"home.compose",disabled:!1}]}return TabmenuController.$inject=["$scope","$rootScope"],TabmenuController}();chavo.TabmenuController=TabmenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var TabmenuController=function(){function TabmenuController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope,this.tabs=[{heading:"みんなの",route:"home.all"},{heading:"あなたの",route:"home.myposts",disabled:!1},{heading:'<i class="fa fa-pencil"></i>',route:"home.compose",disabled:!1}]}return TabmenuController}();chavo.TabmenuController=TabmenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var AuthService=function(){function AuthService($state,$rootScope){this.$state=$state,this.$rootScope=$rootScope}return AuthService.$inject=["$state","$rootScope"],AuthService.prototype.signUp=function(form,callbacks){var user=new Parse.User;user.set("username",form.username),user.set("email",form.email),user.set("password",form.password),user.signUp(null,callbacks)},AuthService.prototype.loginWithFacebook=function(callbacks){Parse.FacebookUtils.logIn(null,callbacks)},AuthService.prototype.logIn=function(authData,callbacks){var _this=this;Parse.User.logIn(authData.username,authData.password,callbacks).then(function(user){_this.$rootScope.currentUser=user})},AuthService.prototype.requestPasswordReset=function(authData,callbacks){Parse.User.requestPasswordReset(authData.email,callbacks).then(function(){})},AuthService.prototype.logOut=function(){var _this=this;Parse.User.logOut().then(function(){_this.$rootScope.currentUser=null})},AuthService}();chavo.AuthService=AuthService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var AuthService=function(){function AuthService($state,$rootScope){this.$state=$state,this.$rootScope=$rootScope}return AuthService.prototype.signUp=function(form,callbacks){var user=new Parse.User;user.set("username",form.username),user.set("email",form.email),user.set("password",form.password),user.signUp(null,callbacks)},AuthService.prototype.loginWithFacebook=function(callbacks){Parse.FacebookUtils.logIn(null,callbacks)},AuthService.prototype.logIn=function(authData,callbacks){var _this=this;Parse.User.logIn(authData.username,authData.password,callbacks).then(function(user){_this.$rootScope.currentUser=user})},AuthService.prototype.requestPasswordReset=function(authData,callbacks){Parse.User.requestPasswordReset(authData.email,callbacks).then(function(){})},AuthService.prototype.logOut=function(){var _this=this;Parse.User.logOut().then(function(){_this.$rootScope.currentUser=null
})},AuthService}();chavo.AuthService=AuthService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var FacebookService=function(){function FacebookService($q,$rootScope,AuthService,$state,$timeout){this.$q=$q,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$timeout=$timeout}return FacebookService.$inject=["$q","$rootScope","AuthService","$state","$timeout"],FacebookService.prototype.api=function(){for(var dummy=[],_i=0;_i<arguments.length;_i++)dummy[_i-0]=arguments[_i];var deferred=this.$q.defer(),args=arguments;return args[args.length++]=function(response){response.error&&deferred.reject(response.error),response.error_msg?deferred.reject(response):deferred.resolve(response)},FB.api.apply(FB,args),deferred.promise},FacebookService.prototype.loginWithFacebookAndGoHome=function(){var _this=this;this.AuthService.loginWithFacebook({success:function(user){_this.$rootScope.currentUser=Parse.User.current(),_this.$q.all([_this.api("/me"),_this.api("/"+user.get("authData").facebook.id+"/picture")]).then(function(response){_this.$timeout(function(){_this.$rootScope.currentUser.setUsername(response[0].name)}),_this.$rootScope.$apply(),_this.$rootScope.currentUser.set("iconUrl",response[1].data.url),_this.$rootScope.currentUser.save({error:function(user,error){console.error(error.code+":"+error.message)}},null,null).then(function(){_this.$state.go("home.all")})})},error:function(){alert("User cancelled the Facebook login or did not fully authorize.")}})},FacebookService}();chavo.FacebookService=FacebookService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var FacebookService=function(){function FacebookService($q,$rootScope,AuthService,$state,$timeout){this.$q=$q,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$timeout=$timeout}return FacebookService.prototype.api=function(){for(var dummy=[],_i=0;_i<arguments.length;_i++)dummy[_i-0]=arguments[_i];var deferred=this.$q.defer(),args=arguments;return args[args.length++]=function(response){response.error&&deferred.reject(response.error),response.error_msg?deferred.reject(response):deferred.resolve(response)},FB.api.apply(FB,args),deferred.promise},FacebookService.prototype.loginWithFacebookAndGoHome=function(){var _this=this;this.AuthService.loginWithFacebook({success:function(user){_this.$rootScope.currentUser=Parse.User.current(),_this.$q.all([_this.api("/me"),_this.api("/"+user.get("authData").facebook.id+"/picture")]).then(function(response){_this.$timeout(function(){_this.$rootScope.currentUser.setUsername(response[0].name)}),_this.$rootScope.$apply(),_this.$rootScope.currentUser.set("iconUrl",response[1].data.url),_this.$rootScope.currentUser.save({error:function(user,error){console.error(error.code+":"+error.message)}},null,null).then(function(){_this.$state.go("home.all")})})},error:function(){alert("User cancelled the Facebook login or did not fully authorize.")}})},FacebookService}();chavo.FacebookService=FacebookService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";angular.module("chavo",["ngAnimate","ngCookies","ngTouch","ngSanitize","restangular","ui.router","ui.router.tabs","ui.bootstrap","ui.validate","toggle-switch","cfp.loadingBar"]).service("AuthService",chavo.AuthService).service("FacebookService",chavo.FacebookService).controller("MainController",chavo.MainController).controller("MainAllController",chavo.MainAllController).controller("MainMyPostsController",chavo.MainMyPostsController).controller("MainComposeController",chavo.MainComposeController).controller("LoginController",chavo.LoginController).controller("NavbarController",chavo.NavbarController).controller("TabmenuController",chavo.TabmenuController).controller("SettingsMenuController",chavo.SettingsMenuController).controller("SettingsContentController",chavo.SettingsContentController).controller("SettingsProfileController",chavo.SettingsProfileController).controller("SettingsChildrenController",chavo.SettingsChildrenController).controller("SettingsChildController",chavo.SettingsChildController).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$stateProvider.state("home",{url:"",templateUrl:"app/main/main.html"}).state("home.myposts",{url:"/myposts",templateUrl:"app/main/myposts/main.myposts.html"}).state("home.all",{url:"/all",templateUrl:"app/main/all/main.all.html"}).state("home.compose",{url:"/compose",templateUrl:"app/main/compose/main.compose.html"}).state("settings",{url:"/settings",templateUrl:"app/settings/settings.html"}).state("settings.profile",{url:"/profile",templateUrl:"app/settings/content/profile/settings.profile.html"}).state("settings.children",{url:"/children",templateUrl:"app/settings/content/children/settings.children.html"}).state("settings.child",{url:"/children/:childId",templateUrl:"app/settings/content/child/settings.child.html"}).state("login",{url:"/login",templateUrl:"app/login/login.html"}),$urlRouterProvider.otherwise("/")}]).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!1}]).run(["$rootScope","$window",function($rootScope,$window){Parse.initialize("FpENpUI2dIIOJu5J4UrssehUKwkB1afjOfEK92Zv","1Wbddi5o4HemnLkhBCmHov121BuE8qS5d1jxPxKs"),$rootScope.currentUser=Parse.User.current(),$window.fbAsyncInit=function(){Parse.FacebookUtils.init({appId:"1461215587529753",xfbml:!0,version:"v2.4"})},function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk")}])}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";angular.module("chavo",["ngAnimate","ngCookies","ngTouch","ngSanitize","restangular","ui.router","ui.router.tabs","ui.bootstrap","ui.validate","toggle-switch","cfp.loadingBar"]).service("AuthService",chavo.AuthService).service("FacebookService",chavo.FacebookService).controller("MainController",chavo.MainController).controller("MainAllController",chavo.MainAllController).controller("MainMyPostsController",chavo.MainMyPostsController).controller("MainComposeController",chavo.MainComposeController).controller("LoginController",chavo.LoginController).controller("NavbarController",chavo.NavbarController).controller("TabmenuController",chavo.TabmenuController).controller("SettingsMenuController",chavo.SettingsMenuController).controller("SettingsContentController",chavo.SettingsContentController).controller("SettingsProfileController",chavo.SettingsProfileController).controller("SettingsChildrenController",chavo.SettingsChildrenController).controller("SettingsChildController",chavo.SettingsChildController).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$stateProvider.state("home",{url:"",templateUrl:"app/main/main.html"}).state("home.myposts",{url:"/myposts",templateUrl:"app/main/myposts/main.myposts.html"}).state("home.all",{url:"/all",templateUrl:"app/main/all/main.all.html"}).state("home.compose",{url:"/compose",templateUrl:"app/main/compose/main.compose.html"}).state("settings",{url:"/settings",templateUrl:"app/settings/settings.html"}).state("settings.profile",{url:"/profile",templateUrl:"app/settings/content/profile/settings.profile.html"}).state("settings.children",{url:"/children",templateUrl:"app/settings/content/children/settings.children.html"}).state("settings.child",{url:"/children/:childId",templateUrl:"app/settings/content/child/settings.child.html"}).state("login",{url:"/login",templateUrl:"app/login/login.html"}),$urlRouterProvider.otherwise("/")}]).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!1}]).run(["$rootScope","$window",function($rootScope,$window){Parse.initialize("FpENpUI2dIIOJu5J4UrssehUKwkB1afjOfEK92Zv","1Wbddi5o4HemnLkhBCmHov121BuE8qS5d1jxPxKs"),$rootScope.currentUser=Parse.User.current(),$window.fbAsyncInit=function(){Parse.FacebookUtils.init({appId:"1461215587529753",xfbml:!0,version:"v2.4"})},function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk")}])}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Child=function(){function Child(dispOrder,nickName,birthday,gender,ageYears,ageMonths,unableBirthday){void 0===dispOrder&&(dispOrder=0),void 0===nickName&&(nickName=null),void 0===birthday&&(birthday=null),void 0===gender&&(gender=2),void 0===ageYears&&(ageYears=null),void 0===ageMonths&&(ageMonths=null),void 0===unableBirthday&&(unableBirthday=!0),this.dispOrder=dispOrder,this.nickName=nickName,this.birthday=birthday,this.gender=gender,this.ageYears=ageYears,this.ageMonths=ageMonths,this.unableBirthday=unableBirthday}return Child}();chavo.Child=Child}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Child=function(){function Child(dispOrder,nickName,birthday,gender,ageYears,ageMonths,unableBirthday){void 0===dispOrder&&(dispOrder=0),void 0===nickName&&(nickName=null),void 0===birthday&&(birthday=null),void 0===gender&&(gender=chavo.GENDER.OTHER),void 0===ageYears&&(ageYears=null),void 0===ageMonths&&(ageMonths=null),void 0===unableBirthday&&(unableBirthday=!0),this.dispOrder=dispOrder,this.nickName=nickName,this.birthday=birthday,this.gender=gender,this.ageYears=ageYears,this.ageMonths=ageMonths,this.unableBirthday=unableBirthday}return Child}();chavo.Child=Child}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";!function(GENDER){GENDER[GENDER.MALE=0]="MALE",GENDER[GENDER.FEMALE=1]="FEMALE",GENDER[GENDER.OTHER=2]="OTHER"}(chavo.GENDER||(chavo.GENDER={}));chavo.GENDER}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";!function(GENDER){GENDER[GENDER.MALE=0]="MALE",GENDER[GENDER.FEMALE=1]="FEMALE",GENDER[GENDER.OTHER=2]="OTHER"}(chavo.GENDER||(chavo.GENDER={}));chavo.GENDER}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Profile=function(){function Profile(username,email,password,icon,like){this.username=username,this.email=email,this.password=password,this.icon=icon,this.like=like}return Profile}();chavo.Profile=Profile}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Profile=function(){function Profile(username,email,password,icon,like){this.username=username,this.email=email,this.password=password,this.icon=icon,this.like=like}return Profile}();chavo.Profile=Profile}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Voice=function(){function Voice(objectId,description,speaker,age,gender,user,icon,like,likeCount,createdAt){this.objectId=objectId,this.description=description,this.speaker=speaker,this.age=age,this.gender=gender,this.user=user,this.icon=icon,this.like=like,this.likeCount=likeCount,this.createdAt=createdAt}return Voice}();chavo.Voice=Voice}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Voice=function(){function Voice(objectId,description,speaker,age,gender,user,icon,like,likeCount,createdAt){this.objectId=objectId,this.description=description,this.speaker=speaker,this.age=age,this.gender=gender,this.user=user,this.icon=icon,this.like=like,this.likeCount=likeCount,this.createdAt=createdAt}return Voice}();chavo.Voice=Voice}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsProfileController=function(){function SettingsProfileController($scope,$rootScope){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.showIcon=!1,this.profile=new chavo.Profile($rootScope.currentUser.getUsername(),$rootScope.currentUser.getEmail(),null,$rootScope.currentUser.get("iconUrl"),$rootScope.currentUser.get("likes"));var fileSelector=angular.element("#photo-selector");fileSelector.fileinput({uploadUrl:"dummy",dropZoneEnabled:!1,showCaption:!1,showPreview:!0,browseClass:"photo-browse-btn btn btn-primary",browseLabel:"画像選択"}),fileSelector.on("filepreupload",function(event,data){if(data.files.length>0){var file=data.files[0],name="photo.jpg",parseFile=new Parse.File(name,file);parseFile.save().then(function(){return _this.$rootScope.currentUser.set("icon",parseFile),_this.$rootScope.currentUser.set("iconUrl",parseFile.url()),_this.$rootScope.currentUser.save()}).then(function(){var profilePhoto=_this.$rootScope.currentUser.get("icon");$scope.$apply(function(){_this.profile.icon=profilePhoto.url(),_this.showIcon=!0}),fileSelector.fileinput("clear")},function(error){console.error(error)})}}),fileSelector.on("fileuploaderror",function(){angular.element(".file-error-message").css("display","none"),console.error("file upload error. (this is expected results. please ignore.)")})}return SettingsProfileController.$inject=["$scope","$rootScope"],SettingsProfileController.prototype.saveProfile=function(){var profInput={username:this.profile.username,email:this.profile.email};this.profile.password&&(profInput.password=this.profile.password),this.$rootScope.currentUser.save(profInput).then(function(){console.log("ほぞんしました")},function(error){console.log("Error: "+error.code+" "+error.message)})},SettingsProfileController}();chavo.SettingsProfileController=SettingsProfileController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsProfileController=function(){function SettingsProfileController($scope,$rootScope){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.showIcon=!1,this.profile=new chavo.Profile($rootScope.currentUser.getUsername(),$rootScope.currentUser.getEmail(),null,$rootScope.currentUser.get("iconUrl"),$rootScope.currentUser.get("likes"));var fileSelector=angular.element("#photo-selector");fileSelector.fileinput({uploadUrl:"dummy",dropZoneEnabled:!1,showCaption:!1,showPreview:!0,browseClass:"photo-browse-btn btn btn-primary",browseLabel:"画像選択"}),fileSelector.on("filepreupload",function(event,data){if(data.files.length>0){var file=data.files[0],name="photo.jpg",parseFile=new Parse.File(name,file);parseFile.save().then(function(){return _this.$rootScope.currentUser.set("icon",parseFile),_this.$rootScope.currentUser.set("iconUrl",parseFile.url()),_this.$rootScope.currentUser.save()}).then(function(){var profilePhoto=_this.$rootScope.currentUser.get("icon");$scope.$apply(function(){_this.profile.icon=profilePhoto.url(),_this.showIcon=!0}),fileSelector.fileinput("clear")},function(error){console.error(error)})}}),fileSelector.on("fileuploaderror",function(){angular.element(".file-error-message").css("display","none"),console.error("file upload error. (this is expected results. please ignore.)")})}return SettingsProfileController.prototype.saveProfile=function(){var profInput={username:this.profile.username,email:this.profile.email};this.profile.password&&(profInput.password=this.profile.password),this.$rootScope.currentUser.save(profInput).then(function(){console.log("ほぞんしました")},function(error){console.log("Error: "+error.code+" "+error.message)})},SettingsProfileController}();chavo.SettingsProfileController=SettingsProfileController}(chavo||(chavo={})),angular.module("chavo").run(["$templateCache",function($templateCache){$templateCache.put("app/login/login.html",'<div class="col-sm-8 col-sm-offset-2" ng-controller="LoginController as login"><h5>ログイン</h5><form class="form-horizontal" ng-show="!$root.currentUser || !$root.currentUser.get(\'emailVerified\')" name="loginForm" novalidate=""><alert type="info" ng-show="$root.currentUser && !$root.currentUser.get(\'emailVerified\')">メールを送信しました。メールのURLクリック後、再度ログインしてください。</alert><div class="form-group"><label for="username" class="col-sm-2 control-label">ユーザ名</label><div class="col-sm-4"><input type="text" ng-model="logInForm.username" class="form-control" id="login-username" name="login-username"></div></div><div class="form-group"><label for="password" class="col-sm-2 control-label">パスワード</label><div class="col-sm-4"><input type="password" ng-model="logInForm.password" class="form-control" id="login-password" name="login-password"><br></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button class="btn btn-default" ng-click="login.logIn(logInForm)" ng-disabled="loginForm.email.$invalid">ログイン</button> or <button class="btn btn-default" ng-click="login.loginWithFacebook()">Facebookでログイン</button></div></div></form><div class="col-sm-offset-2 col-sm-10" id="resetPwPopoverContainer"><alert type="info" ng-show="login.showResetPwMessage">メールを送信しました。メールのURLをクリックしてパスワードを再設定してください。</alert><a popover-template="\'resetPwPopoverTemplate.html\'" popover-placement="right" popover-trigger="focus" role="button" tabindex="0">パスワードを忘れたときはこちら</a><script type="text/ng-template" id="resetPwPopoverTemplate.html"><div class="form-group"> <label>Email</label> <input type="email" ng-model="resetPwForm.email" class="form-control" id="reset-pw-email" name="reset-pw-email"> </div> <button class="btn btn-default" ng-click="login.requestPasswordReset(resetPwForm)" ng-disabled="resetPwForm.email.$invalid">送信</button></script></div><h5>ユーザ登録</h5><form class="form-horizontal" ng-show="!$root.currentUser || !$root.currentUser.get(\'emailVerified\')" name="signUpForm" novalidate=""><alert type="info" ng-show="$root.currentUser && !$root.currentUser.get(\'emailVerified\')">メールを送信しました。メールのURLクリック後、再度ログインしてください。</alert><div class="form-group"><label for="username" class="col-sm-2 control-label">ユーザ名</label><div class="col-sm-4"><input type="text" ng-model="signUpForm.username" class="form-control" id="signup-username" name="signup-username"></div></div><div class="form-group"><label for="email" class="col-sm-2 control-label">Email</label><div class="col-sm-4"><input type="email" ng-model="signUpForm.email" class="form-control" id="signup-email" name="signup-email"></div></div><div class="form-group"><label for="password" class="col-sm-2 control-label">パスワード</label><div class="col-sm-4"><input type="password" ng-model="signUpForm.password" class="form-control" id="signup-password" name="signup-password"><br></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button class="btn btn-default" ng-click="login.signUp(signUpForm)" ng-disabled="signUpForm.email.$invalid">ユーザ登録</button></div></div></form><pre>{{ $root.currentUser | json}}</pre></div>'),$templateCache.put("app/main/main.html",'<div ng-controller="MainController as main" class="container"><div ng-include="\'app/components/navbar/navbar.html\'"></div><div ng-include="\'app/components/tabmenu/tabmenu.html\'"></div><ui-view></ui-view></div>'),$templateCache.put("app/settings/settings.html",'<div class="container"><div ng-include="\'app/components/navbar/navbar.html\'"></div><row><div ng-include="\'app/settings/menu/settings.menu.html\'"></div><div ng-include="\'app/settings/content/settings.content.html\'"></div></row></div>'),$templateCache.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-fixed-top navbar-default" ng-controller="NavbarController as navbar"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" ui-sref="home.all"><span class="glyphicon glyphicon-home"></span> ちゃぼ</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><div ng-show="!$root.currentUser"><ul class="nav navbar-nav navbar-right"><li><a href="#" role="button" ui-sref="settings"><span class="glyphicon glyphicon-cog"></span></a></li><li dropdown=""><a href="#" dropdown-toggle="" data-toggle="dropdown" role="button"><span class="glyphicon glyphicon-chevron-down"></span></a><ul class="dropdown-menu"><li><div class="navbar-login"><div class="row"><div class="col-lg-12"><form><div class="form-group"><input type="text" class="form-control input-sm" ng-model="navLoginForm.username" name="username" placeholder="Username" ng-click="$event.stopPropagation()"> <input type="password" class="form-control input-sm" ng-model="navLoginForm.password" name="password" placeholder="Password" ng-click="$event.stopPropagation()"></div><button type="submit" class="btn btn-default input-sm" ng-click="navbar.logIn(navLoginForm)">ログイン</button></form></div></div></div></li><li class="divider"></li><li><div class="navbar-login navbar-login-session"><div class="row"><div class="col-lg-12"><p><a href="#" class="btn btn-danger btn-block" ng-click="navbar.loginWithFacebook()">Facebookでログイン</a></p></div></div></div></li></ul></li></ul></div><div ng-show="$root.currentUser"><ul class="nav navbar-nav navbar-right"><li><a href="#" role="button" ui-sref="settings"><span class="glyphicon glyphicon-cog"></span></a></li><li dropdown=""><a href="#" dropdown-toggle="" data-toggle="dropdown" role="button"><span class="glyphicon glyphicon-warning-sign text-danger" ng-show="!$root.currentUser.get(\'authData\').facebook && !$root.currentUser.get(\'emailVerified\')"></span> <span class="glyphicon glyphicon-user"></span> <strong>{{$root.currentUser.get(\'username\')}}</strong> <span class="glyphicon glyphicon-chevron-down"></span></a><ul class="dropdown-menu"><li><div class="navbar-login"><div class="row"><div class="col-lg-4"><div ng-style="{ \'background-image\': \'url(\' + $root.currentUser.get(\'iconUrl\') + \')\' }" class="img-circle icon-post"></div></div><div class="col-lg-8"><p class="text-left"><strong>{{$root.currentUser.get(\'username\')}}</strong></p><p class="text-left" ng-show="!$root.currentUser.get(\'authData\').facebook && !$root.currentUser.get(\'emailVerified\')"><alert type="danger">メールアドレスの確認が完了しておらず一部機能が利用できません。メールを確認してURLをクリックしてください。</alert></p></div></div></div></li><li class="divider"></li><li><div class="navbar-login navbar-login-session"><div class="row"><div class="col-lg-12"><p><a href="#" class="btn btn-danger btn-block" ng-click="navbar.logOut()">ログアウト</a></p></div></div></div></li></ul></li></ul><div ng-show=""></div></div></div></div></nav>'),$templateCache.put("app/components/tabmenu/tabmenu.html",'<div class="row" ng-controller="TabmenuController as tabmenu" id="tabmenu"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><tabs data="tabmenu.tabs" type="tabs" justified="true" template-url="app/components/tabmenu/tabs.html"></tabs></div></div>'),$templateCache.put("app/components/tabmenu/tabs.html",'<div><tabset class="tab-container" type="{{type}}" vertical="{{vertical}}" justified="{{justified}}"><tab class="tab" ng-repeat="tab in tabs" active="tab.active" disable="tab.disabled" ng-click="go(tab)"><tab-heading><span ng-bind-html="tab.heading"></span></tab-heading></tab></tabset></div>'),$templateCache.put("app/main/all/main.all.html",'<div ng-controller="MainAllController as main_all" class="row"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><div class="media-list"><div class="media panel panel-default" ng-repeat="voice in main_all.voices"><div class="media-left"><a href="#"><div ng-style="{ \'background-image\': \'url(\' + voice.icon + \')\' }" class="media-object img-circle icon-post"></div></a></div><div class="media-body"><span><small>{{ voice.user }}</small> <small>{{ voice.createdAt }}</small></span> <span class="pull-right"><span ng-click="main_all.toggleLike(voice)" id="like" ng-class="{ \'like-active\': voice.like }"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></span> <span>{{ voice.likeCount }}</span></span><p class="pre-line">{{ voice.description }}</p><p class="text-right"><small>{{ voice.speaker }} {{ voice.age }} {{ voice.gender }}</small></p></div></div></div></div></div>'),$templateCache.put("app/main/compose/main.compose.html",'<div ng-controller="MainComposeController as main_compose" class="row"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><div ng-show="!$root.currentUser"><alert type="danger">投稿機能の利用にはログインが必要です。<a ui-sref="login" class="alert-link">ログインはこちらから</a></alert></div><div ng-show="$root.currentUser && !$root.currentUser.get(\'authData\').facebook && !$root.currentUser.get(\'emailVerified\')"><alert type="danger" close="">投稿機能の利用にはログインが必要です。メールアドレスの確認が完了していません。メールを確認してURLをクリックしてください。</alert></div><div ng-show="$root.currentUser.get(\'authData\').facebook || $root.currentUser.get(\'emailVerified\')"><alert type="danger" ng-show="main_compose.alertMsg" close="">{{main_compose.alertMsg}}</alert><div class="panel panel-default"><div class="panel-body"><form name="formCompose"><fieldset ng-disabled="main_compose.disableInput"><div class="form-group" ng-class="{ \'has-error\': formCompose.description.$dirty && !main_compose.voice.description }"><textarea name="description" ng-model="main_compose.voice.description" class="form-control" rows="3" placeholder="こどもの名言・迷言、一発ネタ、何気ない一言、泣かされたセリフ、なんでも記録しよう！" required="">\n                </textarea></div><div class="form-group">だれのセリフを記録しますか？<div class="btn-group btn-group-sm" dropdown="" is-open="main_compose.dropDownStatus.voiceAuthorIsOpen"><button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle="">{{ \'こどもを選択\' }} <span class="caret"></span></button><ul class="dropdown-menu"><li><a ng-click="main_compose.clearVoiceAuthor()">-- クリアする --</a></li><li ng-repeat="child in main_compose.children"><a ng-click="main_compose.onSelectVoiceAuthor(child)">{{ child.nickName || \'（未登録）\'}} <span ng-if="child.age">{{child.age}}</span> <span ng-if="child.gender === 0">男の子</span> <span ng-if="child.gender === 1">女の子</span></a></li></ul></div></div><div class="form-group"><div class="row"><div class="col-xs-2"><input type="text" class="form-control input-sm" ng-model="main_compose.voiceAuthor.nickName"></div><div class="col-xs-4"><div class="input-group"><input id="voice-author-age-years" type="text" class="form-control input-sm text-right" ng-model="main_compose.voiceAuthor.ageYears"><div class="input-group-addon">歳</div><input id="voice-author-age-months" type="text" class="form-control input-sm text-right" ng-model="main_compose.voiceAuthor.ageMonths"><div class="input-group-addon">ヶ月</div></div></div><div class="col-xs-3"><select class="form-control input-sm" ng-model="main_compose.voiceAuthor.gender" ng-options="gender.value as gender.label for gender in main_compose.genderList"></select></div></div></div><div class="form-group"><toggle-switch ng-model="main_compose.voiceIsPublic" on-label="公開" off-label="非公開"></toggle-switch><button type="button" class="btn btn-primary pull-right" ng-click="main_compose.submit()" ng-disabled="!main_compose.voice.description">送信</button></div></fieldset></form></div></div></div></div></div>'),$templateCache.put("app/main/myposts/main.myposts.html",'<div ng-controller="MainMyPostsController as main_myposts" class="row"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><div class="media-list"><div class="media panel panel-default" ng-repeat="voice in main_myposts.voices"><div class="media-left"><a href="#"><div ng-style="{ \'background-image\': \'url(\' + voice.icon + \')\' }" class="media-object img-circle icon-post"></div></a></div><div class="media-body"><span><small>{{ voice.user }}</small></span><span class="pull-right"><small>{{ voice.createdAt }}</small></span><p class="pre-line">{{ voice.description }}</p><p class="text-right"><small>{{ voice.speaker }} {{ voice.age }} {{ voice.gender }}</small></p></div></div></div></div></div>'),$templateCache.put("app/settings/content/settings.content.html",'<div class="col-sm-6 col-md-6" ng-controller="SettingsContentController as settings_content"><ui-view></ui-view></div>'),$templateCache.put("app/settings/menu/settings.menu.html",'<div ng-controller="SettingsMenuController as settings_menu" class="col-sm-2 col-md-2 col-sm-offset-2 col-md-offset-2"><div class="list-group"><a class="list-group-item" ng-class="{ active: settings_menu.isActive(\'profile\') }" ui-sref="settings.profile" ng-click="settings_menu.activeMenu = \'profile\'">プロフィール</a> <a class="list-group-item" ng-class="{ active: settings_menu.isActive(\'children\') }" ui-sref="settings.children" ng-click="settings_menu.activeMenu = \'children\'">こどもの情報</a></div></div>'),$templateCache.put("app/settings/content/child/settings.child.html",'<div ng-controller="SettingsChildController as settings_child" class="panel panel-default"><div class="panel-body"><form class="form-horizontal"><div class="form-group"><label for="nickName" class="col-sm-3 control-label">ニックネーム</label><div class="col-sm-9"><input type="text" class="form-control" id="nickName" placeholder="ニックネーム" ng-model="settings_child.$rootScope.targetChild.nickName"></div></div><div class="form-group"><label class="col-sm-3 control-label">生年月日</label><div class="col-sm-9 form-inline"><select class="form-control" ng-model="settings_child.yearSelected" ng-options="year for year in settings_child.birthYears" ng-disabled="settings_child.$rootScope.targetChild.unableBirthday"><option value="">--</option></select>年<select class="form-control" ng-model="settings_child.monthSelected" ng-options="month for month in settings_child.birthMonths" ng-disabled="settings_child.$rootScope.targetChild.unableBirthday"><option value="">--</option></select>月<select class="form-control" ng-model="settings_child.dateSelected" ng-options="date for date in settings_child.birthDates" ng-disabled="settings_child.$rootScope.targetChild.unableBirthday"><option value="">--</option></select>日 <span id="unableBirthday"><input type="checkbox" ng-model="settings_child.$rootScope.targetChild.unableBirthday" ng-change="settings_child.initBirthday()"> 登録しない</span></div></div><div class="form-group"><label class="col-sm-3 control-label">性別</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" id="male" value="0" ng-model="settings_child.$rootScope.targetChild.gender"> 男の子</label> <label class="radio-inline"><input type="radio" name="gender" id="femail" value="1" ng-model="settings_child.$rootScope.targetChild.gender"> 女の子</label> <label class="radio-inline"><input type="radio" name="gender" id="none" value="2" ng-model="settings_child.$rootScope.targetChild.gender"> その他・登録しない</label></div></div><button type="button" class="btn btn-primary pull-right" ng-click="settings_child.saveChildData()">保存</button></form></div></div>'),$templateCache.put("app/settings/content/children/settings.children.html",'<div ng-controller="SettingsChildrenController as settings_children"><ul class="list-group"><li class="list-group-item text-right"><a class="btn btn-default" ng-click="settings_children.go(null)"><i class="fa fa-user-plus">追加</i></a></li><li class="list-group-item" ng-repeat="child in settings_children.children"><a ng-click="settings_children.go(child)"><span>{{child.nickName || \'（未登録）\'}}</span><div class="pull-right"><span ng-if="child.ageYears">{{ child.ageYears + \'歳\' }}</span> <span ng-if="child.ageMonths">{{ child.ageMonths + \'ヶ月\' }}</span> <span ng-if="child.gender === 0">男の子</span> <span ng-if="child.gender === 1">女の子</span></div></a></li></ul></div>'),$templateCache.put("app/settings/content/profile/settings.profile.html",'<div class="panel panel-default" ng-controller="SettingsProfileController as settings_profile"><div class="panel-body"><form class="form-horizontal"><div ng-style="{ \'background-image\': \'url(\' + settings_profile.profile.icon + \')\' }" class="img-thumbnail profile-icon"></div><input id="photo-selector" type="file"><div class="form-group"><label for="username" class="col-sm-3 control-label">ユーザ名</label><div class="col-sm-9"><input type="text" class="form-control" id="username" placeholder="ユーザ名" ng-model="settings_profile.profile.username"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">メールアドレス</label><div class="col-sm-9"><input type="text" class="form-control" id="email" placeholder="メールアドレス" ng-model="settings_profile.profile.email"></div></div><div class="form-group"><label for="password" class="col-sm-3 control-label">パスワード</label><div class="col-sm-9"><input type="text" class="form-control" id="password" placeholder="パスワード（変更するときのみ入力）" ng-model="settings_profile.profile.password"></div></div><button type="button" class="btn btn-primary pull-right" ng-click="settings_profile.saveProfile()">保存</button></form></div></div>')
}]);
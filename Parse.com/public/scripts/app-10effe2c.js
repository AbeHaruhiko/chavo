var chavo;!function(chavo){"use strict";var MainController=function(){function MainController(){}return MainController}();chavo.MainController=MainController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainController=function(){function MainController(){}return MainController}();chavo.MainController=MainController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainAllController=function(){function MainAllController($scope,$rootScope,$state,cfpLoadingBar,$modal){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.$modal=$modal,this.voices=new Array,this.init()}return MainAllController.$inject=["$scope","$rootScope","$state","cfpLoadingBar","$modal"],MainAllController.prototype.init=function(){var parseVoices,_this=this,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);this.cfpLoadingBar.start(),query.descending("createdAt"),query.find({success:function(){console.log("success.")},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.User.current()&&promises.push(Parse.User.current().fetch()),Parse.Promise.when(promises)}).then(function(){_this.applyFoundVoices(parseVoices)},function(error){console.error(error),_this.applyFoundVoices(parseVoices)})},MainAllController.prototype.toggleLike=function(voice){var _this=this;voice.like=!voice.like,Parse.Cloud.run("toggleLike",{voice:voice}).then(function(likeCount){_this.$scope.$apply(function(){voice.likeCount=likeCount})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainAllController.prototype.openDeletePostConfirmModal=function(voice){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"deletePostConfirmModal.html",controller:"DeletePostConfirmModalController",controllerAs:"delete_post_modal",size:"sm",resolve:{voice:function(){return voice}}});modalInstance.result.then(function(voice){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;parseVoice.id=voice.objectId,parseVoice.destroy().then(function(){_this.$state.reload()}),console.dir(voice)},function(){console.dir(voice)})},MainAllController.prototype.applyFoundVoices=function(parseVoices){var _this=this,myLikes=this.$rootScope.currentUser&&this.$rootScope.currentUser.get("likes")?this.$rootScope.currentUser.get("likes"):[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice,myLikes))}),this.cfpLoadingBar.complete(),this.$scope.$apply()},MainAllController}();chavo.MainAllController=MainAllController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainAllController=function(){function MainAllController($scope,$rootScope,$state,cfpLoadingBar,$modal){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.$modal=$modal,this.voices=new Array,this.init()}return MainAllController.prototype.init=function(){var parseVoices,_this=this,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);this.cfpLoadingBar.start(),query.descending("createdAt"),query.find({success:function(){console.log("success.")},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.User.current()&&promises.push(Parse.User.current().fetch()),Parse.Promise.when(promises)}).then(function(){_this.applyFoundVoices(parseVoices)},function(error){console.error(error),_this.applyFoundVoices(parseVoices)})},MainAllController.prototype.toggleLike=function(voice){var _this=this;voice.like=!voice.like,Parse.Cloud.run("toggleLike",{voice:voice}).then(function(likeCount){_this.$scope.$apply(function(){voice.likeCount=likeCount})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainAllController.prototype.openDeletePostConfirmModal=function(voice){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"deletePostConfirmModal.html",controller:"DeletePostConfirmModalController",controllerAs:"delete_post_modal",size:"sm",resolve:{voice:function(){return voice}}});modalInstance.result.then(function(voice){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;parseVoice.id=voice.objectId,parseVoice.destroy().then(function(){_this.$state.reload()}),console.dir(voice)},function(){console.dir(voice)})},MainAllController.prototype.applyFoundVoices=function(parseVoices){var _this=this,myLikes=this.$rootScope.currentUser&&this.$rootScope.currentUser.get("likes")?this.$rootScope.currentUser.get("likes"):[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice,myLikes))}),this.cfpLoadingBar.complete(),this.$scope.$apply()},MainAllController}();chavo.MainAllController=MainAllController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainMyPostsController=function(){function MainMyPostsController($scope,$rootScope,$state,cfpLoadingBar,$modal){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.$modal=$modal,this.voices=new Array,this.init()}return MainMyPostsController.$inject=["$scope","$rootScope","$state","cfpLoadingBar","$modal"],MainMyPostsController.prototype.init=function(){var parseVoices,_this=this,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);this.cfpLoadingBar.start(),query.descending("createdAt"),query.equalTo("user",Parse.User.current()),query.find({success:function(){},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.User.current()&&promises.push(Parse.User.current().fetch()),Parse.Promise.when(promises)}).then(function(){_this.applyFoundVoices(parseVoices)},function(error){console.error(error),_this.applyFoundVoices(parseVoices)})},MainMyPostsController.prototype.toggleLike=function(voice){var _this=this;voice.like=!voice.like,Parse.Cloud.run("toggleLike",{voice:voice}).then(function(likeCount){_this.$scope.$apply(function(){voice.likeCount=likeCount})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainMyPostsController.prototype.openDeletePostConfirmModal=function(voice){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"deletePostConfirmModal.html",controller:"DeletePostConfirmModalController",controllerAs:"delete_post_modal",size:"sm",resolve:{voice:function(){return voice}}});modalInstance.result.then(function(voice){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;parseVoice.id=voice.objectId,parseVoice.destroy().then(function(){_this.$state.reload()}),console.info("1: Modal dismissed at: "+new Date),console.dir(voice)},function(){console.info("2: Modal dismissed at: "+new Date),console.dir(voice)})},MainMyPostsController.prototype.applyFoundVoices=function(parseVoices){var _this=this,myLikes=this.$rootScope.currentUser&&this.$rootScope.currentUser.get("likes")?this.$rootScope.currentUser.get("likes"):[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice,myLikes))}),this.cfpLoadingBar.complete(),this.$scope.$apply()},MainMyPostsController}();chavo.MainMyPostsController=MainMyPostsController;var DeletePostConfirmModalController=function(){function DeletePostConfirmModalController($scope,$modalInstance,voice){this.$scope=$scope,this.$modalInstance=$modalInstance,this.voice=voice}return DeletePostConfirmModalController.$inject=["$scope","$modalInstance","voice"],DeletePostConfirmModalController.prototype.ok=function(){this.$modalInstance.close(this.voice)},DeletePostConfirmModalController.prototype.cancel=function(){this.$modalInstance.dismiss("cancel")},DeletePostConfirmModalController}();chavo.DeletePostConfirmModalController=DeletePostConfirmModalController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainMyPostsController=function(){function MainMyPostsController($scope,$rootScope,$state,cfpLoadingBar,$modal){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.$modal=$modal,this.voices=new Array,this.init()}return MainMyPostsController.prototype.init=function(){var parseVoices,_this=this,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);this.cfpLoadingBar.start(),query.descending("createdAt"),query.equalTo("user",Parse.User.current()),query.find({success:function(){},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.User.current()&&promises.push(Parse.User.current().fetch()),Parse.Promise.when(promises)}).then(function(){_this.applyFoundVoices(parseVoices)},function(error){console.error(error),_this.applyFoundVoices(parseVoices)})},MainMyPostsController.prototype.toggleLike=function(voice){var _this=this;voice.like=!voice.like,Parse.Cloud.run("toggleLike",{voice:voice}).then(function(likeCount){_this.$scope.$apply(function(){voice.likeCount=likeCount})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainMyPostsController.prototype.openDeletePostConfirmModal=function(voice){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"deletePostConfirmModal.html",controller:"DeletePostConfirmModalController",controllerAs:"delete_post_modal",size:"sm",resolve:{voice:function(){return voice}}});modalInstance.result.then(function(voice){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;parseVoice.id=voice.objectId,parseVoice.destroy().then(function(){_this.$state.reload()}),console.info("1: Modal dismissed at: "+new Date),console.dir(voice)},function(){console.info("2: Modal dismissed at: "+new Date),console.dir(voice)})},MainMyPostsController.prototype.applyFoundVoices=function(parseVoices){var _this=this,myLikes=this.$rootScope.currentUser&&this.$rootScope.currentUser.get("likes")?this.$rootScope.currentUser.get("likes"):[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice,myLikes))}),this.cfpLoadingBar.complete(),this.$scope.$apply()},MainMyPostsController}();chavo.MainMyPostsController=MainMyPostsController;var DeletePostConfirmModalController=function(){function DeletePostConfirmModalController($scope,$modalInstance,voice){this.$scope=$scope,this.$modalInstance=$modalInstance,this.voice=voice}return DeletePostConfirmModalController.prototype.ok=function(){this.$modalInstance.close(this.voice)},DeletePostConfirmModalController.prototype.cancel=function(){this.$modalInstance.dismiss("cancel")},DeletePostConfirmModalController}();chavo.DeletePostConfirmModalController=DeletePostConfirmModalController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainTagController=function(){function MainTagController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$modal){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$modal=$modal,this.voices=new Array,this.sampleTagList=["おもしろ","迷言","名言","一発ネタ","謎ワード","感動","成長したなあ。","苦笑","ほのぼの"],this.init()}return MainTagController.$inject=["$scope","$rootScope","$state","$stateParams","cfpLoadingBar","$modal"],MainTagController.prototype.init=function(){var parseVoices,_this=this,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);this.cfpLoadingBar.start(),query.descending("createdAt"),query.equalTo("tags",this.$stateParams.tag),query.find({success:function(){console.log("success.")},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.User.current()&&promises.push(Parse.User.current().fetch()),Parse.Promise.when(promises)}).then(function(){_this.applyFoundVoices(parseVoices)},function(error){console.error(error),_this.applyFoundVoices(parseVoices)})},MainTagController.prototype.toggleLike=function(voice){var _this=this;voice.like=!voice.like,Parse.Cloud.run("toggleLike",{voice:voice}).then(function(likeCount){_this.$scope.$apply(function(){voice.likeCount=likeCount})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainTagController.prototype.openDeletePostConfirmModal=function(voice){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"deletePostConfirmModal.html",controller:"DeletePostConfirmModalController",controllerAs:"delete_post_modal",size:"sm",resolve:{voice:function(){return voice}}});modalInstance.result.then(function(voice){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;parseVoice.id=voice.objectId,parseVoice.destroy().then(function(){_this.$state.reload()}),console.dir(voice)},function(){console.dir(voice)})},MainTagController.prototype.applyFoundVoices=function(parseVoices){var _this=this,myLikes=this.$rootScope.currentUser&&this.$rootScope.currentUser.get("likes")?this.$rootScope.currentUser.get("likes"):[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice,myLikes))}),this.cfpLoadingBar.complete(),this.$scope.$apply()},MainTagController}();chavo.MainTagController=MainTagController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainTagController=function(){function MainTagController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$modal){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$modal=$modal,this.voices=new Array,this.sampleTagList=["おもしろ","迷言","名言","一発ネタ","謎ワード","感動","成長したなあ。","苦笑","ほのぼの"],this.init()}return MainTagController.prototype.init=function(){var parseVoices,_this=this,ParseVoice=Parse.Object.extend("Voice"),query=new Parse.Query(ParseVoice);this.cfpLoadingBar.start(),query.descending("createdAt"),query.equalTo("tags",this.$stateParams.tag),query.find({success:function(){console.log("success.")},error:function(error){console.error("Error: "+error.code+" "+error.message)}}).then(function(results){parseVoices=results;var promises=[];return results.forEach(function(voice){promises.push(voice.get("user").fetch())}),Parse.User.current()&&promises.push(Parse.User.current().fetch()),Parse.Promise.when(promises)}).then(function(){_this.applyFoundVoices(parseVoices)},function(error){console.error(error),_this.applyFoundVoices(parseVoices)})},MainTagController.prototype.toggleLike=function(voice){var _this=this;voice.like=!voice.like,Parse.Cloud.run("toggleLike",{voice:voice}).then(function(likeCount){_this.$scope.$apply(function(){voice.likeCount=likeCount})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainTagController.prototype.openDeletePostConfirmModal=function(voice){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"deletePostConfirmModal.html",controller:"DeletePostConfirmModalController",controllerAs:"delete_post_modal",size:"sm",resolve:{voice:function(){return voice}}});modalInstance.result.then(function(voice){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;parseVoice.id=voice.objectId,parseVoice.destroy().then(function(){_this.$state.reload()}),console.dir(voice)},function(){console.dir(voice)})},MainTagController.prototype.applyFoundVoices=function(parseVoices){var _this=this,myLikes=this.$rootScope.currentUser&&this.$rootScope.currentUser.get("likes")?this.$rootScope.currentUser.get("likes"):[];parseVoices.forEach(function(voice){void 0!==voice.get("user").get("username")&&_this.voices.push(new chavo.Voice(voice,myLikes))}),this.cfpLoadingBar.complete(),this.$scope.$apply()},MainTagController}();chavo.MainTagController=MainTagController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainComposeController=function(){function MainComposeController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$q){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$q=$q,this.children=new Array,this.genderList=[{label:"男の子",value:chavo.GENDER.MALE},{label:"女の子",value:chavo.GENDER.FEMALE},{label:"非表示",value:chavo.GENDER.OTHER}],this.voiceIsPublic=!1,this.disableInput=!1,this.ngTags=[];var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday")))})})}),this.voice=$stateParams.voice,this.ngTags=chavo.Tag.stringArrayToTagsInputObjectArray(this.voice.tags),this.voiceAuthor=this.voiceAuthor||new chavo.Child,this.voiceAuthor.nickName=this.voice.speaker,this.voiceAuthor.ageYears=this.voice.ageYears,this.voiceAuthor.ageMonths=this.voice.ageMonths,this.voiceAuthor.gender=this.voice.genderValue,this.voiceIsPublic=this.voice.isPublic;var fileSelector=angular.element("#photo-selector");fileSelector.fileinput({dropZoneEnabled:!1,showUpload:!1,showCaption:!1,showPreview:!0,browseClass:"photo-browse-btn btn btn-primary btn-outline",browseLabel:"画像選択"})}return MainComposeController.$inject=["$scope","$rootScope","$state","$stateParams","cfpLoadingBar","$q"],MainComposeController.prototype.onSelectVoiceAuthor=function(child){this.voiceAuthor=angular.copy(child)},MainComposeController.prototype.clearVoiceAuthor=function(){this.voiceAuthor=null},MainComposeController.prototype.submit=function(){var _this=this;this.disableInput=!0,this.voice.tags=chavo.Tag.tagsInputObjectArrayToStringArray(this.ngTags);var fileSelector=angular.element("#photo-selector");if(fileSelector[0].files.length>0){var file=fileSelector[0].files[0],name="photo.jpg",parseFile=new Parse.File(name,file);parseFile.save().then(function(){var parseVoice=_this.makeParseVoice();return parseVoice.set("photo",parseFile),parseVoice.set("photoUrl",parseFile.url()),parseVoice.save({error:function(voice,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました"),_this.$state.go("home.all")},function(error){console.error("投稿送信時エラー: "+error.code+" "+error.message),this.alertMsg="送信に失敗しました...時間をおいてためしてください。",this.disableInput=!1,this.$scope.$apply()})}else{var parseVoice=this.makeParseVoice();parseVoice.save({error:function(voice,error){console.log("Error: "+error.code+" "+error.message)}}).then(function(){console.log("ほぞんしました"),_this.$state.go("home.all")},function(error){console.error("投稿送信時エラー: "+error.code+" "+error.message),_this.alertMsg="送信に失敗しました...時間をおいてためしてください。",_this.disableInput=!1,_this.$scope.$apply()})}Parse.Cloud.run("saveTag",{tags:this.voice.tags})},MainComposeController.prototype.fetchUser=function(){var _this=this;Parse.User.current().fetch().then(function(){_this.$rootScope.$apply(function(){_this.$rootScope.currentUser=Parse.User.current()})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainComposeController.prototype.loadTags=function(queryString){var ParseTag=Parse.Object.extend("Tag"),query=new Parse.Query(ParseTag);query.select("tag"),query.startsWith("tag",queryString);var tags=[],deferred=this.$q.defer();return query.find().then(function(results){results.forEach(function(result){tags.push({text:result.get("tag")})}),deferred.resolve(tags)},null),deferred.promise},MainComposeController.prototype.makeParseVoice=function(){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;this.voice.objectId&&(parseVoice.id=this.voice.objectId),parseVoice.set("description",this.voice.description),parseVoice.set("tags",this.voice.tags),parseVoice.set("gender",this.voiceAuthor?this.voiceAuthor.gender:chavo.GENDER.OTHER),parseVoice.set("author",this.voiceAuthor?this.voiceAuthor.nickName:null),parseVoice.set("ageYears",this.voiceAuthor?this.voiceAuthor.ageYears:null),parseVoice.set("ageMonths",this.voiceAuthor?this.voiceAuthor.ageMonths:null),parseVoice.set("user",Parse.User.current());var voiceACL=new Parse.ACL(Parse.User.current());return this.voiceIsPublic&&voiceACL.setPublicReadAccess(!0),parseVoice.setACL(voiceACL),parseVoice},MainComposeController}();chavo.MainComposeController=MainComposeController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var MainComposeController=function(){function MainComposeController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$q){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$q=$q,this.children=new Array,this.genderList=[{label:"男の子",value:chavo.GENDER.MALE},{label:"女の子",value:chavo.GENDER.FEMALE},{label:"非表示",value:chavo.GENDER.OTHER}],this.voiceIsPublic=!1,this.disableInput=!1,this.ngTags=[];var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday")))})})}),this.voice=$stateParams.voice,this.ngTags=chavo.Tag.stringArrayToTagsInputObjectArray(this.voice.tags),this.voiceAuthor=this.voiceAuthor||new chavo.Child,this.voiceAuthor.nickName=this.voice.speaker,this.voiceAuthor.ageYears=this.voice.ageYears,this.voiceAuthor.ageMonths=this.voice.ageMonths,this.voiceAuthor.gender=this.voice.genderValue,this.voiceIsPublic=this.voice.isPublic;var fileSelector=angular.element("#photo-selector");fileSelector.fileinput({dropZoneEnabled:!1,showUpload:!1,showCaption:!1,showPreview:!0,browseClass:"photo-browse-btn btn btn-primary btn-outline",browseLabel:"画像選択"})}return MainComposeController.prototype.onSelectVoiceAuthor=function(child){this.voiceAuthor=angular.copy(child)},MainComposeController.prototype.clearVoiceAuthor=function(){this.voiceAuthor=null},MainComposeController.prototype.submit=function(){var _this=this;this.disableInput=!0,this.voice.tags=chavo.Tag.tagsInputObjectArrayToStringArray(this.ngTags);var fileSelector=angular.element("#photo-selector");if(fileSelector[0].files.length>0){var file=fileSelector[0].files[0],name="photo.jpg",parseFile=new Parse.File(name,file);parseFile.save().then(function(){var parseVoice=_this.makeParseVoice();return parseVoice.set("photo",parseFile),parseVoice.set("photoUrl",parseFile.url()),parseVoice.save({error:function(voice,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました"),_this.$state.go("home.all")},function(error){console.error("投稿送信時エラー: "+error.code+" "+error.message),this.alertMsg="送信に失敗しました...時間をおいてためしてください。",this.disableInput=!1,this.$scope.$apply()})}else{var parseVoice=this.makeParseVoice();parseVoice.save({error:function(voice,error){console.log("Error: "+error.code+" "+error.message)}}).then(function(){console.log("ほぞんしました"),_this.$state.go("home.all")},function(error){console.error("投稿送信時エラー: "+error.code+" "+error.message),_this.alertMsg="送信に失敗しました...時間をおいてためしてください。",_this.disableInput=!1,_this.$scope.$apply()})}Parse.Cloud.run("saveTag",{tags:this.voice.tags})},MainComposeController.prototype.fetchUser=function(){var _this=this;Parse.User.current().fetch().then(function(){_this.$rootScope.$apply(function(){_this.$rootScope.currentUser=Parse.User.current()})},function(error){console.error("Error: "+error.code+" "+error.message)})},MainComposeController.prototype.loadTags=function(queryString){var ParseTag=Parse.Object.extend("Tag"),query=new Parse.Query(ParseTag);query.select("tag"),query.startsWith("tag",queryString);var tags=[],deferred=this.$q.defer();return query.find().then(function(results){results.forEach(function(result){tags.push({text:result.get("tag")})}),deferred.resolve(tags)},null),deferred.promise},MainComposeController.prototype.makeParseVoice=function(){var ParseVoice=Parse.Object.extend("Voice"),parseVoice=new ParseVoice;this.voice.objectId&&(parseVoice.id=this.voice.objectId),parseVoice.set("description",this.voice.description),parseVoice.set("tags",this.voice.tags),parseVoice.set("gender",this.voiceAuthor?this.voiceAuthor.gender:chavo.GENDER.OTHER),parseVoice.set("author",this.voiceAuthor?this.voiceAuthor.nickName:null),parseVoice.set("ageYears",this.voiceAuthor?this.voiceAuthor.ageYears:null),parseVoice.set("ageMonths",this.voiceAuthor?this.voiceAuthor.ageMonths:null),parseVoice.set("user",Parse.User.current());var voiceACL=new Parse.ACL(Parse.User.current());return this.voiceIsPublic&&voiceACL.setPublicReadAccess(!0),parseVoice.setACL(voiceACL),parseVoice},MainComposeController}();chavo.MainComposeController=MainComposeController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var LoginController=function(){function LoginController($scope,$rootScope,$state,$location,AuthService,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$location=$location,this.AuthService=AuthService,this.$q=$q,this.FacebookService=FacebookService,this.showResetPwMessage=!1}return LoginController.$inject=["$scope","$rootScope","$state","$location","AuthService","$q","FacebookService"],LoginController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},LoginController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$scope.$apply(function(){_this.loginMessage=101===error.code?"ユーザー名かパスワードが間違っています。":200===error.code?"ユーザー名が間違っています。":201===error.code?"パスワードが間違っています。":"ログインできませんでした。："+error.code+" "+error.message})}})},LoginController.prototype.requestPasswordReset=function(formData){var _this=this;this.AuthService.requestPasswordReset(formData,{success:function(){_this.showResetPwMessage=!0,_this.$state.go("login")},error:function(error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},LoginController.prototype.logOut=function(){this.AuthService.logOut()},LoginController}();chavo.LoginController=LoginController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var LoginController=function(){function LoginController($scope,$rootScope,$state,$location,AuthService,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$location=$location,this.AuthService=AuthService,this.$q=$q,this.FacebookService=FacebookService,this.showResetPwMessage=!1}return LoginController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},LoginController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$scope.$apply(function(){_this.loginMessage=101===error.code?"ユーザー名かパスワードが間違っています。":200===error.code?"ユーザー名が間違っています。":201===error.code?"パスワードが間違っています。":"ログインできませんでした。："+error.code+" "+error.message})}})},LoginController.prototype.requestPasswordReset=function(formData){var _this=this;this.AuthService.requestPasswordReset(formData,{success:function(){_this.showResetPwMessage=!0,_this.$state.go("login")},error:function(error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},LoginController.prototype.logOut=function(){this.AuthService.logOut()},LoginController}();chavo.LoginController=LoginController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SignupController=function(){function SignupController($scope,$rootScope,$state,$location,AuthService,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$location=$location,this.AuthService=AuthService,this.$q=$q,this.FacebookService=FacebookService,this.showResetPwMessage=!1}return SignupController.$inject=["$scope","$rootScope","$state","$location","AuthService","$q","FacebookService"],SignupController.prototype.signUp=function(form){var _this=this;this.AuthService.signUp(form,{success:function(){_this.$state.reload()},error:function(user,error){alert("Unable to sign up:  "+error.code+" "+error.message)}})},SignupController}();chavo.SignupController=SignupController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SignupController=function(){function SignupController($scope,$rootScope,$state,$location,AuthService,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$location=$location,this.AuthService=AuthService,this.$q=$q,this.FacebookService=FacebookService,this.showResetPwMessage=!1}return SignupController.prototype.signUp=function(form){var _this=this;this.AuthService.signUp(form,{success:function(){_this.$state.reload()},error:function(user,error){alert("Unable to sign up:  "+error.code+" "+error.message)}})},SignupController}();chavo.SignupController=SignupController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsMenuController=function(){function SettingsMenuController($scope,$rootScope,$state){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.menuItems=[{title:"プロフィール",route:"settings.profile"},{title:"こどもの情報",route:"settings.children"},{title:"かぞくの情報",route:"settings.family"}]}return SettingsMenuController.$inject=["$scope","$rootScope","$state"],SettingsMenuController}();chavo.SettingsMenuController=SettingsMenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsMenuController=function(){function SettingsMenuController($scope,$rootScope,$state){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.menuItems=[{title:"プロフィール",route:"settings.profile"},{title:"こどもの情報",route:"settings.children"},{title:"かぞくの情報",route:"settings.family"}]}return SettingsMenuController}();chavo.SettingsMenuController=SettingsMenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsContentController=function(){function SettingsContentController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope}return SettingsContentController.$inject=["$scope","$rootScope"],SettingsContentController}();chavo.SettingsContentController=SettingsContentController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsContentController=function(){function SettingsContentController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope}return SettingsContentController}();chavo.SettingsContentController=SettingsContentController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";
var SettingsChildrenController=function(){function SettingsChildrenController($scope,$rootScope,$state,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.children=new Array;var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);cfpLoadingBar.start(),query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){return results.length<=0?void cfpLoadingBar.complete():void results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);cfpLoadingBar.complete(),_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday"),Parse.User.current()))})})})}return SettingsChildrenController.$inject=["$scope","$rootScope","$state","cfpLoadingBar"],SettingsChildrenController.prototype.go=function(child){child=child?child:new chavo.Child,this.$rootScope.targetChild=child,this.$state.go("settings.child",{childId:child.dispOrder})},SettingsChildrenController}();chavo.SettingsChildrenController=SettingsChildrenController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsChildrenController=function(){function SettingsChildrenController($scope,$rootScope,$state,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.children=new Array;var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);cfpLoadingBar.start(),query.ascending("dispOrder"),query.find({error:function(error){console.log("Error: "+error.code+" "+error.message)}}).then(function(results){return results.length<=0?void cfpLoadingBar.complete():void results.forEach(function(parseChild){if(parseChild.get("birthday"))var years=""+moment().diff(moment(parseChild.get("birthday")),"years"),months=""+(moment().diff(moment(parseChild.get("birthday")),"months")-12*+years);cfpLoadingBar.complete(),_this.$scope.$apply(function(){_this.children.push(new chavo.Child(parseChild.get("dispOrder"),parseChild.get("nickName"),parseChild.get("birthday"),parseChild.get("gender"),years?years:null,months?months:null,!parseChild.get("birthday"),Parse.User.current()))})})})}return SettingsChildrenController.prototype.go=function(child){child=child?child:new chavo.Child,this.$rootScope.targetChild=child,this.$state.go("settings.child",{childId:child.dispOrder})},SettingsChildrenController}();chavo.SettingsChildrenController=SettingsChildrenController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsChildController=function(){function SettingsChildController($scope,$rootScope,$state,$stateParams,cfpLoadingBar){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,console.log(this.$rootScope.targetChild),this.initBirthday(),this.birthYears=new Array;for(var i=1900;i<=moment().year();i++)this.birthYears.push(i);for(this.birthMonths=[1,2,3,4,5,6,7,8,9,10,11,12],this.birthDates=new Array,i=1;31>=i;i++)this.birthDates.push(i)}return SettingsChildController.$inject=["$scope","$rootScope","$state","$stateParams","cfpLoadingBar"],SettingsChildController.prototype.saveChildData=function(){var _this=this;if(this.cfpLoadingBar.start(),this.$rootScope.targetChild.dispOrder>0){var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.equalTo("dispOrder",this.$rootScope.targetChild.dispOrder),query.first().then(function(child){return child.set("dispOrder",_this.$rootScope.targetChild.dispOrder),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.$state.go("settings.children")})}else{var dispOrder=0;ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild),query.descending("dispOrder"),query.first({success:function(result){result&&result.get("dispOrder")&&(dispOrder=result.get("dispOrder"))},error:function(error){console.error("Error: "+error.code+" "+error.message),this.cfpLoadingBar.complete()}}).then(function(){return Parse.Cloud.run("getRequestUsersFamilyRole")}).then(function(role){var child=new ParseChild;if(child.set("dispOrder",dispOrder+1),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.set("createdBy",Parse.User.current()),role){var childACL=new Parse.ACL;childACL.setRoleReadAccess(role,!0),childACL.setRoleWriteAccess(role,!0),child.setACL(childACL)}else child.setACL(new Parse.ACL(Parse.User.current()));return child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message),this.cfpLoadingBar.complete()}})}).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.$state.go("settings.children")})}},SettingsChildController.prototype.initBirthday=function(){this.$rootScope.targetChild.unableBirthday?(this.yearSelected=null,this.monthSelected=null,this.dateSelected=null):this.setBirthday()},SettingsChildController.prototype.getInputBirthday=function(){return this.$rootScope.targetChild.unableBirthday?null:moment({year:this.yearSelected,months:this.monthSelected,date:this.dateSelected}).toDate()},SettingsChildController.prototype.setBirthday=function(){var momentObj=this.$rootScope.targetChild&&this.$rootScope.targetChild.birthday?moment(this.$rootScope.targetChild.birthday):moment();this.yearSelected=momentObj.year(),this.monthSelected=momentObj.month(),this.dateSelected=momentObj.date()},SettingsChildController}();chavo.SettingsChildController=SettingsChildController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsChildController=function(){function SettingsChildController($scope,$rootScope,$state,$stateParams,cfpLoadingBar){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,console.log(this.$rootScope.targetChild),this.initBirthday(),this.birthYears=new Array;for(var i=1900;i<=moment().year();i++)this.birthYears.push(i);for(this.birthMonths=[1,2,3,4,5,6,7,8,9,10,11,12],this.birthDates=new Array,i=1;31>=i;i++)this.birthDates.push(i)}return SettingsChildController.prototype.saveChildData=function(){var _this=this;if(this.cfpLoadingBar.start(),this.$rootScope.targetChild.dispOrder>0){var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.equalTo("dispOrder",this.$rootScope.targetChild.dispOrder),query.first().then(function(child){return child.set("dispOrder",_this.$rootScope.targetChild.dispOrder),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.$state.go("settings.children")})}else{var dispOrder=0;ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild),query.descending("dispOrder"),query.first({success:function(result){result&&result.get("dispOrder")&&(dispOrder=result.get("dispOrder"))},error:function(error){console.error("Error: "+error.code+" "+error.message),this.cfpLoadingBar.complete()}}).then(function(){return Parse.Cloud.run("getRequestUsersFamilyRole")}).then(function(role){var child=new ParseChild;if(child.set("dispOrder",dispOrder+1),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.set("createdBy",Parse.User.current()),role){var childACL=new Parse.ACL;childACL.setRoleReadAccess(role,!0),childACL.setRoleWriteAccess(role,!0),child.setACL(childACL)}else child.setACL(new Parse.ACL(Parse.User.current()));return child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message),this.cfpLoadingBar.complete()}})}).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.$state.go("settings.children")})}},SettingsChildController.prototype.initBirthday=function(){this.$rootScope.targetChild.unableBirthday?(this.yearSelected=null,this.monthSelected=null,this.dateSelected=null):this.setBirthday()},SettingsChildController.prototype.getInputBirthday=function(){return this.$rootScope.targetChild.unableBirthday?null:moment({year:this.yearSelected,months:this.monthSelected,date:this.dateSelected}).toDate()},SettingsChildController.prototype.setBirthday=function(){var momentObj=this.$rootScope.targetChild&&this.$rootScope.targetChild.birthday?moment(this.$rootScope.targetChild.birthday):moment();this.yearSelected=momentObj.year(),this.monthSelected=momentObj.month(),this.dateSelected=momentObj.date()},SettingsChildController}();chavo.SettingsChildController=SettingsChildController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsProfileController=function(){function SettingsProfileController($scope,$rootScope,cfpLoadingBar){this.$scope=$scope,this.$rootScope=$rootScope,this.cfpLoadingBar=cfpLoadingBar,this.showIcon=!1,this.disableInput=!1,this.profile=new chavo.Profile($rootScope.currentUser.getUsername(),$rootScope.currentUser.getEmail(),null,$rootScope.currentUser.get("iconUrl"),$rootScope.currentUser.get("likes"));var fileSelector=angular.element("#photo-selector");fileSelector.fileinput({dropZoneEnabled:!1,showCaption:!1,showUpload:!1,showPreview:!0,browseClass:"photo-browse-btn btn btn-primary btn-outline",browseLabel:"画像選択"})}return SettingsProfileController.$inject=["$scope","$rootScope","cfpLoadingBar"],SettingsProfileController.prototype.saveProfile=function(){var _this=this;this.disableInput=!0,this.cfpLoadingBar.start();var profInput={username:this.profile.username,email:this.profile.email};this.profile.password&&(profInput.password=this.profile.password);var fileSelector=angular.element("#photo-selector");if(fileSelector[0].files.length>0){var file=fileSelector[0].files[0],name="photo.jpg",parseFile=new Parse.File(name,file);parseFile.save().then(function(){return _this.$rootScope.currentUser.set("icon",parseFile),_this.$rootScope.currentUser.set("iconUrl",parseFile.url()),_this.$rootScope.currentUser.save(profInput)}).then(function(){var profilePhoto=_this.$rootScope.currentUser.get("icon");_this.$scope.$apply(function(){fileSelector.fileinput("clear"),_this.profile.icon=profilePhoto.url(),_this.showIcon=!0}),_this.cfpLoadingBar.complete(),_this.disableInput=!1},function(error){console.error(error),this.cfpLoadingBar.complete(),this.disableInput=!1})}else this.$rootScope.currentUser.save(profInput).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.disableInput=!1},function(error){console.log("Error: "+error.code+" "+error.message),_this.cfpLoadingBar.complete(),_this.disableInput=!1})},SettingsProfileController}();chavo.SettingsProfileController=SettingsProfileController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsProfileController=function(){function SettingsProfileController($scope,$rootScope,cfpLoadingBar){this.$scope=$scope,this.$rootScope=$rootScope,this.cfpLoadingBar=cfpLoadingBar,this.showIcon=!1,this.disableInput=!1,this.profile=new chavo.Profile($rootScope.currentUser.getUsername(),$rootScope.currentUser.getEmail(),null,$rootScope.currentUser.get("iconUrl"),$rootScope.currentUser.get("likes"));var fileSelector=angular.element("#photo-selector");fileSelector.fileinput({dropZoneEnabled:!1,showCaption:!1,showUpload:!1,showPreview:!0,browseClass:"photo-browse-btn btn btn-primary btn-outline",browseLabel:"画像選択"})}return SettingsProfileController.prototype.saveProfile=function(){var _this=this;this.disableInput=!0,this.cfpLoadingBar.start();var profInput={username:this.profile.username,email:this.profile.email};this.profile.password&&(profInput.password=this.profile.password);var fileSelector=angular.element("#photo-selector");if(fileSelector[0].files.length>0){var file=fileSelector[0].files[0],name="photo.jpg",parseFile=new Parse.File(name,file);parseFile.save().then(function(){return _this.$rootScope.currentUser.set("icon",parseFile),_this.$rootScope.currentUser.set("iconUrl",parseFile.url()),_this.$rootScope.currentUser.save(profInput)}).then(function(){var profilePhoto=_this.$rootScope.currentUser.get("icon");_this.$scope.$apply(function(){fileSelector.fileinput("clear"),_this.profile.icon=profilePhoto.url(),_this.showIcon=!0}),_this.cfpLoadingBar.complete(),_this.disableInput=!1},function(error){console.error(error),this.cfpLoadingBar.complete(),this.disableInput=!1})}else this.$rootScope.currentUser.save(profInput).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.disableInput=!1},function(error){console.log("Error: "+error.code+" "+error.message),_this.cfpLoadingBar.complete(),_this.disableInput=!1})},SettingsProfileController}();chavo.SettingsProfileController=SettingsProfileController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyController=function(){function SettingsFamilyController($scope,$rootScope,$state,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.familyMembers=new Array,this.familyApps=new Array,cfpLoadingBar.start(),Parse.Cloud.run("getRequestUsersFamilyMember").then(function(parseFamilyList){parseFamilyList.forEach(function(family){_this.familyMembers.push(new chavo.Profile(family.get("username"),null,null,family.get("iconUrl"),null))}),cfpLoadingBar.complete()}),Parse.Cloud.run("getFamilyAppFromRequestUser").then(function(parseFamilyAppList){console.dir(parseFamilyAppList),parseFamilyAppList.forEach(function(parseFamilyApplication){_this.familyApps.push(new chavo.FamilyApplication(parseFamilyApplication.get(Parse.User.current().get("usename")),parseFamilyApplication.get(Parse.User.current().id),parseFamilyApplication.get(Parse.User.current().get("iconUrl")),parseFamilyApplication.get(Const.FamilyApplication.COL_TO_USER).get("username"),parseFamilyApplication.get(Const.FamilyApplication.COL_TO_USER).id,parseFamilyApplication.get(Const.FamilyApplication.COL_TO_USER).get("iconUrl"),parseFamilyApplication.get(Const.FamilyApplication.COL_APPLY_DATE_TIME),parseFamilyApplication.id))}),console.dir(_this.familyApps)})}return SettingsFamilyController.$inject=["$scope","$rootScope","$state","cfpLoadingBar"],SettingsFamilyController.prototype.go=function(child){child=child?child:new chavo.Child,this.$rootScope.targetChild=child,this.$state.go("settings.family.apply",{childId:child.dispOrder})},SettingsFamilyController}();chavo.SettingsFamilyController=SettingsFamilyController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyController=function(){function SettingsFamilyController($scope,$rootScope,$state,cfpLoadingBar){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.cfpLoadingBar=cfpLoadingBar,this.familyMembers=new Array,this.familyApps=new Array,cfpLoadingBar.start(),Parse.Cloud.run("getRequestUsersFamilyMember").then(function(parseFamilyList){parseFamilyList.forEach(function(family){_this.familyMembers.push(new chavo.Profile(family.get("username"),null,null,family.get("iconUrl"),null))}),cfpLoadingBar.complete()}),Parse.Cloud.run("getFamilyAppFromRequestUser").then(function(parseFamilyAppList){console.dir(parseFamilyAppList),parseFamilyAppList.forEach(function(parseFamilyApplication){_this.familyApps.push(new chavo.FamilyApplication(parseFamilyApplication.get(Parse.User.current().get("usename")),parseFamilyApplication.get(Parse.User.current().id),parseFamilyApplication.get(Parse.User.current().get("iconUrl")),parseFamilyApplication.get(Const.FamilyApplication.COL_TO_USER).get("username"),parseFamilyApplication.get(Const.FamilyApplication.COL_TO_USER).id,parseFamilyApplication.get(Const.FamilyApplication.COL_TO_USER).get("iconUrl"),parseFamilyApplication.get(Const.FamilyApplication.COL_APPLY_DATE_TIME),parseFamilyApplication.id))}),console.dir(_this.familyApps)})}return SettingsFamilyController.prototype.go=function(child){child=child?child:new chavo.Child,this.$rootScope.targetChild=child,this.$state.go("settings.family.apply",{childId:child.dispOrder})},SettingsFamilyController}();chavo.SettingsFamilyController=SettingsFamilyController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyApplicationController=function(){function SettingsFamilyApplicationController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$q){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$q=$q,this.ngTags=[],console.log(this.$rootScope.targetChild)}return SettingsFamilyApplicationController.$inject=["$scope","$rootScope","$state","$stateParams","cfpLoadingBar","$q"],SettingsFamilyApplicationController.prototype.apply=function(){var ParseFamilyApplication=Parse.Object.extend("FamilyApplication"),query=new Parse.Query(ParseFamilyApplication);query.equalTo(Const.FamilyApplication.COL_FROM_USER,Parse.User.current());var toUser=new Parse.User;toUser.id=this.ngTags[0].objectId,query.equalTo(Const.FamilyApplication.COL_TO_USER,toUser),query.first().then(function(application){if(application);else{var familyApplication=new ParseFamilyApplication;familyApplication.set(Const.FamilyApplication.COL_FROM_USER,Parse.User.current()),familyApplication.set(Const.FamilyApplication.COL_TO_USER,toUser),familyApplication.save()}})},SettingsFamilyApplicationController.prototype.loadUser=function(queryString){var query=new Parse.Query(Parse.User);query.select("username","iconUrl"),query.startsWith("username",queryString);var users=[],deferred=this.$q.defer();return query.find().then(function(results){results.forEach(function(result){users.push({text:result.get("username"),iconUrl:result.get("iconUrl"),objectId:result.id})}),deferred.resolve(users)},null),deferred.promise},SettingsFamilyApplicationController}();chavo.SettingsFamilyApplicationController=SettingsFamilyApplicationController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyApplicationController=function(){function SettingsFamilyApplicationController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$q){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$q=$q,this.ngTags=[],console.log(this.$rootScope.targetChild)}return SettingsFamilyApplicationController.prototype.apply=function(){var ParseFamilyApplication=Parse.Object.extend("FamilyApplication"),query=new Parse.Query(ParseFamilyApplication);query.equalTo(Const.FamilyApplication.COL_FROM_USER,Parse.User.current());var toUser=new Parse.User;toUser.id=this.ngTags[0].objectId,query.equalTo(Const.FamilyApplication.COL_TO_USER,toUser),query.first().then(function(application){if(application);else{var familyApplication=new ParseFamilyApplication;familyApplication.set(Const.FamilyApplication.COL_FROM_USER,Parse.User.current()),familyApplication.set(Const.FamilyApplication.COL_TO_USER,toUser),familyApplication.save()}})},SettingsFamilyApplicationController.prototype.loadUser=function(queryString){var query=new Parse.Query(Parse.User);query.select("username","iconUrl"),query.startsWith("username",queryString);var users=[],deferred=this.$q.defer();return query.find().then(function(results){results.forEach(function(result){users.push({text:result.get("username"),iconUrl:result.get("iconUrl"),objectId:result.id})}),deferred.resolve(users)},null),deferred.promise},SettingsFamilyApplicationController}();chavo.SettingsFamilyApplicationController=SettingsFamilyApplicationController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyApprovalController=function(){function SettingsFamilyApprovalController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$q,$modal){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$q=$q,this.$modal=$modal,this.familyApplicationList=[],cfpLoadingBar.start(),Parse.Cloud.run("getFamilyAppToRequestUser").then(function(results){return results.length<=0?void cfpLoadingBar.complete():void results.forEach(function(parseFamilyApplication){cfpLoadingBar.complete(),_this.$scope.$apply(function(){_this.familyApplicationList.push(new chavo.FamilyApplication(parseFamilyApplication.get(Const.FamilyApplication.COL_FROM_USER).get("username"),parseFamilyApplication.get(Const.FamilyApplication.COL_FROM_USER).id,parseFamilyApplication.get(Const.FamilyApplication.COL_FROM_USER).get("iconUrl"),parseFamilyApplication.get(Parse.User.current().get("usename")),parseFamilyApplication.get(Parse.User.current().id),parseFamilyApplication.get(Parse.User.current().get("iconUrl")),parseFamilyApplication.get(Const.FamilyApplication.COL_APPLY_DATE_TIME),parseFamilyApplication.id))})})})}return SettingsFamilyApprovalController.$inject=["$scope","$rootScope","$state","$stateParams","cfpLoadingBar","$q","$modal"],SettingsFamilyApprovalController.prototype.openConfirmModal=function(mode,familyApplication){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"rejectOrApproveConfirmModal.html",controller:"RejectOrApproveConfirmModalController",controllerAs:"rejecrt_apprive_modal",size:"sm",resolve:{mode:function(){return mode},familyApplication:function(){return familyApplication}}});modalInstance.result.then(function(){"reject"===mode?_this.destroyFamilyApproval(familyApplication):"approve"===mode&&_this.doFamilyApproval(familyApplication)},function(){console.dir(familyApplication.objectId)})},SettingsFamilyApprovalController.prototype.destroyFamilyApproval=function(familyApplication){var _this=this,ParseFamilyApplication=Parse.Object.extend("FamilyApplication"),parseFamilyApplication=new ParseFamilyApplication;parseFamilyApplication.id=familyApplication.objectId,parseFamilyApplication.destroy().then(function(){_this.$state.reload()}),console.dir(familyApplication.objectId)},SettingsFamilyApprovalController.prototype.doFamilyApproval=function(familyApplication){console.dir(familyApplication.objectId),Parse.Cloud.run("addFamily",{familyApplication:familyApplication})},SettingsFamilyApprovalController}();chavo.SettingsFamilyApprovalController=SettingsFamilyApprovalController;var RejectOrApproveConfirmModalController=function(){function RejectOrApproveConfirmModalController($scope,$modalInstance,familyApplication,mode){this.$scope=$scope,this.$modalInstance=$modalInstance,this.familyApplication=familyApplication,this.mode=mode,this.modeDispText="","reject"===mode?this.modeDispText="否認":"approve"===mode&&(this.modeDispText="承認")}return RejectOrApproveConfirmModalController.$inject=["$scope","$modalInstance","familyApplication","mode"],RejectOrApproveConfirmModalController.prototype.process=function(){this.$modalInstance.close()},RejectOrApproveConfirmModalController.prototype.cancel=function(){this.$modalInstance.dismiss("cancel")},RejectOrApproveConfirmModalController}();chavo.RejectOrApproveConfirmModalController=RejectOrApproveConfirmModalController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyApprovalController=function(){function SettingsFamilyApprovalController($scope,$rootScope,$state,$stateParams,cfpLoadingBar,$q,$modal){var _this=this;this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,this.$q=$q,this.$modal=$modal,this.familyApplicationList=[],cfpLoadingBar.start(),Parse.Cloud.run("getFamilyAppToRequestUser").then(function(results){return results.length<=0?void cfpLoadingBar.complete():void results.forEach(function(parseFamilyApplication){cfpLoadingBar.complete(),_this.$scope.$apply(function(){_this.familyApplicationList.push(new chavo.FamilyApplication(parseFamilyApplication.get(Const.FamilyApplication.COL_FROM_USER).get("username"),parseFamilyApplication.get(Const.FamilyApplication.COL_FROM_USER).id,parseFamilyApplication.get(Const.FamilyApplication.COL_FROM_USER).get("iconUrl"),parseFamilyApplication.get(Parse.User.current().get("usename")),parseFamilyApplication.get(Parse.User.current().id),parseFamilyApplication.get(Parse.User.current().get("iconUrl")),parseFamilyApplication.get(Const.FamilyApplication.COL_APPLY_DATE_TIME),parseFamilyApplication.id))})})})}return SettingsFamilyApprovalController.prototype.openConfirmModal=function(mode,familyApplication){var _this=this,modalInstance=this.$modal.open({animation:!0,templateUrl:"rejectOrApproveConfirmModal.html",controller:"RejectOrApproveConfirmModalController",controllerAs:"rejecrt_apprive_modal",size:"sm",resolve:{mode:function(){return mode},familyApplication:function(){return familyApplication}}});modalInstance.result.then(function(){"reject"===mode?_this.destroyFamilyApproval(familyApplication):"approve"===mode&&_this.doFamilyApproval(familyApplication)},function(){console.dir(familyApplication.objectId)})},SettingsFamilyApprovalController.prototype.destroyFamilyApproval=function(familyApplication){var _this=this,ParseFamilyApplication=Parse.Object.extend("FamilyApplication"),parseFamilyApplication=new ParseFamilyApplication;parseFamilyApplication.id=familyApplication.objectId,parseFamilyApplication.destroy().then(function(){_this.$state.reload()}),console.dir(familyApplication.objectId)},SettingsFamilyApprovalController.prototype.doFamilyApproval=function(familyApplication){console.dir(familyApplication.objectId),Parse.Cloud.run("addFamily",{familyApplication:familyApplication})},SettingsFamilyApprovalController}();chavo.SettingsFamilyApprovalController=SettingsFamilyApprovalController;var RejectOrApproveConfirmModalController=function(){function RejectOrApproveConfirmModalController($scope,$modalInstance,familyApplication,mode){this.$scope=$scope,this.$modalInstance=$modalInstance,this.familyApplication=familyApplication,this.mode=mode,this.modeDispText="","reject"===mode?this.modeDispText="否認":"approve"===mode&&(this.modeDispText="承認")}return RejectOrApproveConfirmModalController.prototype.process=function(){this.$modalInstance.close()},RejectOrApproveConfirmModalController.prototype.cancel=function(){this.$modalInstance.dismiss("cancel")},RejectOrApproveConfirmModalController}();chavo.RejectOrApproveConfirmModalController=RejectOrApproveConfirmModalController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var NavbarController=function(){function NavbarController($scope,$rootScope,AuthService,$state,$location,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$location=$location,this.$q=$q,this.FacebookService=FacebookService}return NavbarController.$inject=["$scope","$rootScope","AuthService","$state","$location","$q","FacebookService"],NavbarController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},NavbarController.prototype.logOut=function(){this.AuthService.logOut()},NavbarController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},NavbarController.prototype.fetchUser=function(){var _this=this;Parse.User.current().fetch().then(function(){_this.$rootScope.$apply(function(){_this.$rootScope.currentUser=Parse.User.current()})},function(error){console.error("Error: "+error.code+" "+error.message)})},NavbarController}();chavo.NavbarController=NavbarController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var NavbarController=function(){function NavbarController($scope,$rootScope,AuthService,$state,$location,$q,FacebookService){this.$scope=$scope,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$location=$location,this.$q=$q,this.FacebookService=FacebookService}return NavbarController.prototype.logIn=function(formData){var _this=this;this.AuthService.logIn(formData,{success:function(){_this.$state.go("home.all")},error:function(user,error){console.log("Unable to login:  "+error.code+" "+error.message),_this.$state.go("login")}})},NavbarController.prototype.logOut=function(){this.AuthService.logOut()},NavbarController.prototype.loginWithFacebook=function(){this.FacebookService.loginWithFacebookAndGoHome()},NavbarController.prototype.fetchUser=function(){var _this=this;Parse.User.current().fetch().then(function(){_this.$rootScope.$apply(function(){_this.$rootScope.currentUser=Parse.User.current()})},function(error){console.error("Error: "+error.code+" "+error.message)})},NavbarController}();chavo.NavbarController=NavbarController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var TabmenuController=function(){function TabmenuController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope,this.tabs=[{heading:"みんなの",route:"home.all"},{heading:"あなたの",route:"home.myposts",disabled:!1},{heading:"タグ",route:"home.tag",disabled:!1},{heading:'<i class="fa fa-pencil"></i>',route:"home.compose",disabled:!1}]}return TabmenuController.$inject=["$scope","$rootScope"],TabmenuController}();chavo.TabmenuController=TabmenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var TabmenuController=function(){function TabmenuController($scope,$rootScope){this.$scope=$scope,this.$rootScope=$rootScope,this.tabs=[{heading:"みんなの",route:"home.all"},{heading:"あなたの",route:"home.myposts",disabled:!1},{heading:"タグ",route:"home.tag",disabled:!1},{heading:'<i class="fa fa-pencil"></i>',route:"home.compose",disabled:!1}]}return TabmenuController}();chavo.TabmenuController=TabmenuController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var AuthService=function(){function AuthService($state,$rootScope){this.$state=$state,this.$rootScope=$rootScope}return AuthService.$inject=["$state","$rootScope"],AuthService.prototype.signUp=function(form,callbacks){var _this=this,user=new Parse.User;user.set("username",form.username),user.set("email",form.email),user.set("password",form.password),user.signUp(null,callbacks).then(function(user){_this.$rootScope.currentUser=user})},AuthService.prototype.loginWithFacebook=function(callbacks){Parse.FacebookUtils.logIn(null,callbacks)},AuthService.prototype.logIn=function(authData,callbacks){var _this=this;void 0===authData&&(authData={username:"",password:""}),Parse.User.logIn(authData.username,authData.password,callbacks).then(function(user){_this.$rootScope.currentUser=user})},AuthService.prototype.requestPasswordReset=function(authData,callbacks){Parse.User.requestPasswordReset(authData.email,callbacks).then(function(){console.log("password reset done.")})},AuthService.prototype.logOut=function(){var _this=this;Parse.User.logOut().then(function(){_this.$rootScope.currentUser=null})},AuthService}();chavo.AuthService=AuthService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var AuthService=function(){function AuthService($state,$rootScope){this.$state=$state,this.$rootScope=$rootScope}return AuthService.prototype.signUp=function(form,callbacks){var _this=this,user=new Parse.User;
user.set("username",form.username),user.set("email",form.email),user.set("password",form.password),user.signUp(null,callbacks).then(function(user){_this.$rootScope.currentUser=user})},AuthService.prototype.loginWithFacebook=function(callbacks){Parse.FacebookUtils.logIn(null,callbacks)},AuthService.prototype.logIn=function(authData,callbacks){var _this=this;void 0===authData&&(authData={username:"",password:""}),Parse.User.logIn(authData.username,authData.password,callbacks).then(function(user){_this.$rootScope.currentUser=user})},AuthService.prototype.requestPasswordReset=function(authData,callbacks){Parse.User.requestPasswordReset(authData.email,callbacks).then(function(){console.log("password reset done.")})},AuthService.prototype.logOut=function(){var _this=this;Parse.User.logOut().then(function(){_this.$rootScope.currentUser=null})},AuthService}();chavo.AuthService=AuthService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var FacebookService=function(){function FacebookService($q,$rootScope,AuthService,$state,$timeout){this.$q=$q,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$timeout=$timeout}return FacebookService.$inject=["$q","$rootScope","AuthService","$state","$timeout"],FacebookService.prototype.api=function(){for(var dummy=[],_i=0;_i<arguments.length;_i++)dummy[_i-0]=arguments[_i];var deferred=this.$q.defer(),args=arguments;return args[args.length++]=function(response){response.error&&deferred.reject(response.error),response.error_msg?deferred.reject(response):deferred.resolve(response)},FB.api.apply(FB,args),deferred.promise},FacebookService.prototype.loginWithFacebookAndGoHome=function(){var _this=this;this.AuthService.loginWithFacebook({success:function(user){_this.$rootScope.currentUser=Parse.User.current(),_this.$q.all([_this.api("/me"),_this.api("/"+user.get("authData").facebook.id+"/picture")]).then(function(response){_this.$timeout(function(){_this.$rootScope.currentUser.setUsername(response[0].name)}),_this.$rootScope.$apply(),_this.$rootScope.currentUser.set("iconUrl",response[1].data.url),_this.$rootScope.currentUser.save({error:function(user,error){console.error(error.code+":"+error.message)}},null,null).then(function(){_this.$state.go("home.all")})})},error:function(){alert("User cancelled the Facebook login or did not fully authorize.")}})},FacebookService}();chavo.FacebookService=FacebookService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var FacebookService=function(){function FacebookService($q,$rootScope,AuthService,$state,$timeout){this.$q=$q,this.$rootScope=$rootScope,this.AuthService=AuthService,this.$state=$state,this.$timeout=$timeout}return FacebookService.prototype.api=function(){for(var dummy=[],_i=0;_i<arguments.length;_i++)dummy[_i-0]=arguments[_i];var deferred=this.$q.defer(),args=arguments;return args[args.length++]=function(response){response.error&&deferred.reject(response.error),response.error_msg?deferred.reject(response):deferred.resolve(response)},FB.api.apply(FB,args),deferred.promise},FacebookService.prototype.loginWithFacebookAndGoHome=function(){var _this=this;this.AuthService.loginWithFacebook({success:function(user){_this.$rootScope.currentUser=Parse.User.current(),_this.$q.all([_this.api("/me"),_this.api("/"+user.get("authData").facebook.id+"/picture")]).then(function(response){_this.$timeout(function(){_this.$rootScope.currentUser.setUsername(response[0].name)}),_this.$rootScope.$apply(),_this.$rootScope.currentUser.set("iconUrl",response[1].data.url),_this.$rootScope.currentUser.save({error:function(user,error){console.error(error.code+":"+error.message)}},null,null).then(function(){_this.$state.go("home.all")})})},error:function(){alert("User cancelled the Facebook login or did not fully authorize.")}})},FacebookService}();chavo.FacebookService=FacebookService}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";angular.module("chavo",["ngAnimate","ngCookies","ngTouch","ngSanitize","restangular","ui.router","ui.router.tabs","ui.bootstrap","ui.validate","toggle-switch","cfp.loadingBar","ngTagsInput"]).service("AuthService",chavo.AuthService).service("FacebookService",chavo.FacebookService).controller("MainController",chavo.MainController).controller("MainAllController",chavo.MainAllController).controller("MainTagController",chavo.MainTagController).controller("MainMyPostsController",chavo.MainMyPostsController).controller("DeletePostConfirmModalController",chavo.DeletePostConfirmModalController).controller("MainComposeController",chavo.MainComposeController).controller("LoginController",chavo.LoginController).controller("SignupController",chavo.SignupController).controller("NavbarController",chavo.NavbarController).controller("TabmenuController",chavo.TabmenuController).controller("SettingsMenuController",chavo.SettingsMenuController).controller("SettingsContentController",chavo.SettingsContentController).controller("SettingsProfileController",chavo.SettingsProfileController).controller("SettingsChildrenController",chavo.SettingsChildrenController).controller("SettingsChildController",chavo.SettingsChildController).controller("SettingsFamilyController",chavo.SettingsFamilyController).controller("SettingsFamilyApplicationController",chavo.SettingsFamilyApplicationController).controller("SettingsFamilyApprovalController",chavo.SettingsFamilyApprovalController).controller("RejectOrApproveConfirmModalController",chavo.RejectOrApproveConfirmModalController).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$stateProvider.state("home",{url:"",templateUrl:"app/main/main.html"}).state("home.myposts",{url:"/myposts",templateUrl:"app/main/myposts/main.myposts.html"}).state("home.all",{url:"/all",templateUrl:"app/main/all/main.all.html"}).state("home.tag",{url:"/tag/:tag",templateUrl:"app/main/tag/main.tag.html"}).state("home.compose",{url:"/compose/:voiceId",templateUrl:"app/main/compose/main.compose.html",params:{voice:{}}}).state("settings",{url:"/settings",templateUrl:"app/settings/settings.html"}).state("settings.profile",{url:"/profile",templateUrl:"app/settings/content/profile/settings.profile.html"}).state("settings.children",{url:"/children",templateUrl:"app/settings/content/children/settings.children.html"}).state("settings.child",{url:"/child/:childId",templateUrl:"app/settings/content/child/settings.child.html"}).state("settings.family",{url:"/family",templateUrl:"app/settings/content/family/settings.family.html"}).state("settings.family_application",{url:"/family_application",templateUrl:"app/settings/content/family_application/settings.family_application.html"}).state("settings.family_approval",{url:"/family_approval",templateUrl:"app/settings/content/family_approval/settings.family_approval.html"}).state("login",{url:"/login",templateUrl:"app/login/login.html"}).state("signup",{url:"/signup",templateUrl:"app/signup/signup.html"}),$urlRouterProvider.otherwise("/")}]).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!1}]).run(["$rootScope","$window",function($rootScope,$window){Parse.initialize("FpENpUI2dIIOJu5J4UrssehUKwkB1afjOfEK92Zv","1Wbddi5o4HemnLkhBCmHov121BuE8qS5d1jxPxKs"),$rootScope.currentUser=Parse.User.current(),$window.fbAsyncInit=function(){Parse.FacebookUtils.init({appId:"1461215587529753",xfbml:!0,version:"v2.4"})},function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk")}])}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";angular.module("chavo",["ngAnimate","ngCookies","ngTouch","ngSanitize","restangular","ui.router","ui.router.tabs","ui.bootstrap","ui.validate","toggle-switch","cfp.loadingBar","ngTagsInput"]).service("AuthService",chavo.AuthService).service("FacebookService",chavo.FacebookService).controller("MainController",chavo.MainController).controller("MainAllController",chavo.MainAllController).controller("MainTagController",chavo.MainTagController).controller("MainMyPostsController",chavo.MainMyPostsController).controller("DeletePostConfirmModalController",chavo.DeletePostConfirmModalController).controller("MainComposeController",chavo.MainComposeController).controller("LoginController",chavo.LoginController).controller("SignupController",chavo.SignupController).controller("NavbarController",chavo.NavbarController).controller("TabmenuController",chavo.TabmenuController).controller("SettingsMenuController",chavo.SettingsMenuController).controller("SettingsContentController",chavo.SettingsContentController).controller("SettingsProfileController",chavo.SettingsProfileController).controller("SettingsChildrenController",chavo.SettingsChildrenController).controller("SettingsChildController",chavo.SettingsChildController).controller("SettingsFamilyController",chavo.SettingsFamilyController).controller("SettingsFamilyApplicationController",chavo.SettingsFamilyApplicationController).controller("SettingsFamilyApprovalController",chavo.SettingsFamilyApprovalController).controller("RejectOrApproveConfirmModalController",chavo.RejectOrApproveConfirmModalController).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$stateProvider.state("home",{url:"",templateUrl:"app/main/main.html"}).state("home.myposts",{url:"/myposts",templateUrl:"app/main/myposts/main.myposts.html"}).state("home.all",{url:"/all",templateUrl:"app/main/all/main.all.html"}).state("home.tag",{url:"/tag/:tag",templateUrl:"app/main/tag/main.tag.html"}).state("home.compose",{url:"/compose/:voiceId",templateUrl:"app/main/compose/main.compose.html",params:{voice:{}}}).state("settings",{url:"/settings",templateUrl:"app/settings/settings.html"}).state("settings.profile",{url:"/profile",templateUrl:"app/settings/content/profile/settings.profile.html"}).state("settings.children",{url:"/children",templateUrl:"app/settings/content/children/settings.children.html"}).state("settings.child",{url:"/child/:childId",templateUrl:"app/settings/content/child/settings.child.html"}).state("settings.family",{url:"/family",templateUrl:"app/settings/content/family/settings.family.html"}).state("settings.family_application",{url:"/family_application",templateUrl:"app/settings/content/family_application/settings.family_application.html"}).state("settings.family_approval",{url:"/family_approval",templateUrl:"app/settings/content/family_approval/settings.family_approval.html"}).state("login",{url:"/login",templateUrl:"app/login/login.html"}).state("signup",{url:"/signup",templateUrl:"app/signup/signup.html"}),$urlRouterProvider.otherwise("/")}]).config(["cfpLoadingBarProvider",function(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!1}]).run(["$rootScope","$window",function($rootScope,$window){Parse.initialize("FpENpUI2dIIOJu5J4UrssehUKwkB1afjOfEK92Zv","1Wbddi5o4HemnLkhBCmHov121BuE8qS5d1jxPxKs"),$rootScope.currentUser=Parse.User.current(),$window.fbAsyncInit=function(){Parse.FacebookUtils.init({appId:"1461215587529753",xfbml:!0,version:"v2.4"})},function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk")}])}(chavo||(chavo={}));var Const;!function(Const){var FamilyApplication;!function(FamilyApplication){FamilyApplication.COL_FROM_USER="fromUser",FamilyApplication.COL_TO_USER="toUser",FamilyApplication.COL_APPLY_DATE_TIME="applyDateTime"}(FamilyApplication=Const.FamilyApplication||(Const.FamilyApplication={}))}(Const||(Const={}));var Const;!function(Const){var FamilyApproval;!function(FamilyApproval){FamilyApproval.MODE_REJECT="reject",FamilyApproval.MODE_APPROVE="approve"}(FamilyApproval=Const.FamilyApproval||(Const.FamilyApproval={}))}(Const||(Const={}));var Const;!function(Const){var FamilyApplication;!function(FamilyApplication){FamilyApplication.COL_FROM_USER="fromUser",FamilyApplication.COL_TO_USER="toUser",FamilyApplication.COL_APPLY_DATE_TIME="applyDateTime"}(FamilyApplication=Const.FamilyApplication||(Const.FamilyApplication={}))}(Const||(Const={}));var Const;!function(Const){var FamilyApproval;!function(FamilyApproval){FamilyApproval.MODE_REJECT="reject",FamilyApproval.MODE_APPROVE="approve"}(FamilyApproval=Const.FamilyApproval||(Const.FamilyApproval={}))}(Const||(Const={}));var chavo;!function(chavo){"use strict";var Child=function(){function Child(dispOrder,nickName,birthday,gender,ageYears,ageMonths,unableBirthday,createdBy){void 0===dispOrder&&(dispOrder=0),void 0===nickName&&(nickName=null),void 0===birthday&&(birthday=null),void 0===gender&&(gender=chavo.GENDER.OTHER),void 0===ageYears&&(ageYears=null),void 0===ageMonths&&(ageMonths=null),void 0===unableBirthday&&(unableBirthday=!0),void 0===createdBy&&(createdBy=null),this.dispOrder=dispOrder,this.nickName=nickName,this.birthday=birthday,this.gender=gender,this.ageYears=ageYears,this.ageMonths=ageMonths,this.unableBirthday=unableBirthday,this.createdBy=createdBy}return Child}();chavo.Child=Child}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Child=function(){function Child(dispOrder,nickName,birthday,gender,ageYears,ageMonths,unableBirthday,createdBy){void 0===dispOrder&&(dispOrder=0),void 0===nickName&&(nickName=null),void 0===birthday&&(birthday=null),void 0===gender&&(gender=chavo.GENDER.OTHER),void 0===ageYears&&(ageYears=null),void 0===ageMonths&&(ageMonths=null),void 0===unableBirthday&&(unableBirthday=!0),void 0===createdBy&&(createdBy=null),this.dispOrder=dispOrder,this.nickName=nickName,this.birthday=birthday,this.gender=gender,this.ageYears=ageYears,this.ageMonths=ageMonths,this.unableBirthday=unableBirthday,this.createdBy=createdBy}return Child}();chavo.Child=Child}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var FamilyApplication=function(){function FamilyApplication(fromUserId,fromUserObjectId,fromUserIconUrl,toUserId,toUserObjectId,toUserIconUrl,applyDateTime,objectId){this.fromUserId=fromUserId,this.fromUserObjectId=fromUserObjectId,this.fromUserIconUrl=fromUserIconUrl,this.toUserId=toUserId,this.toUserObjectId=toUserObjectId,this.toUserIconUrl=toUserIconUrl,this.applyDateTime=applyDateTime,this.objectId=objectId}return FamilyApplication}();chavo.FamilyApplication=FamilyApplication}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var FamilyApplication=function(){function FamilyApplication(fromUserId,fromUserObjectId,fromUserIconUrl,toUserId,toUserObjectId,toUserIconUrl,applyDateTime,objectId){this.fromUserId=fromUserId,this.fromUserObjectId=fromUserObjectId,this.fromUserIconUrl=fromUserIconUrl,this.toUserId=toUserId,this.toUserObjectId=toUserObjectId,this.toUserIconUrl=toUserIconUrl,this.applyDateTime=applyDateTime,this.objectId=objectId}return FamilyApplication}();chavo.FamilyApplication=FamilyApplication}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";!function(GENDER){GENDER[GENDER.MALE=0]="MALE",GENDER[GENDER.FEMALE=1]="FEMALE",GENDER[GENDER.OTHER=2]="OTHER"}(chavo.GENDER||(chavo.GENDER={}));chavo.GENDER}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";!function(GENDER){GENDER[GENDER.MALE=0]="MALE",GENDER[GENDER.FEMALE=1]="FEMALE",GENDER[GENDER.OTHER=2]="OTHER"}(chavo.GENDER||(chavo.GENDER={}));chavo.GENDER}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Profile=function(){function Profile(username,email,password,icon,like){this.username=username,this.email=email,this.password=password,this.icon=icon,this.like=like}return Profile}();chavo.Profile=Profile}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Profile=function(){function Profile(username,email,password,icon,like){this.username=username,this.email=email,this.password=password,this.icon=icon,this.like=like}return Profile}();chavo.Profile=Profile}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Tag=function(){function Tag(tag){this.tag=tag}return Tag.tagsInputObjectArrayToStringArray=function(tagsInputObjectArray){var array=[];return tagsInputObjectArray.forEach(function(tagsInputObject){array.push(tagsInputObject.text)}),array},Tag.stringArrayToTagsInputObjectArray=function(tagStringArray){if(!tagStringArray)return[];var tagsInputObjectArray=[];return tagStringArray.forEach(function(tag){tagsInputObjectArray.push({text:tag})}),tagsInputObjectArray},Tag}();chavo.Tag=Tag}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Tag=function(){function Tag(tag){this.tag=tag}return Tag.tagsInputObjectArrayToStringArray=function(tagsInputObjectArray){var array=[];return tagsInputObjectArray.forEach(function(tagsInputObject){array.push(tagsInputObject.text)}),array},Tag.stringArrayToTagsInputObjectArray=function(tagStringArray){if(!tagStringArray)return[];var tagsInputObjectArray=[];return tagStringArray.forEach(function(tag){tagsInputObjectArray.push({text:tag})}),tagsInputObjectArray},Tag}();chavo.Tag=Tag}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Voice=function(){function Voice(voice,likes){this.constructVoiceFromParseVoice(voice,likes)}return Voice.prototype.constructVoiceFromParseVoice=function(voice,likes){this.objectId=voice.id,this.description=voice.get("description"),this.tags=voice.get("tags"),this.speaker=voice.get("author"),this.age=this.makeAgeString(voice.get("ageYears"),voice.get("ageMonths")),this.ageYears=voice.get("ageYears"),this.ageMonths=voice.get("ageMonths"),this.gender=0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",this.genderValue=voice.get("gender"),this.user=voice.get("user").get("username"),this.userObjectId=voice.get("user").id,this.icon=void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),this.like=likes.indexOf(voice.id)>=0?!0:!1,this.likeCount=voice.get("likeCount"),this.photoUrl=voice.get("photoUrl"),this.isPublic=voice.getACL().getPublicReadAccess(),this.createdAt=moment(voice.createdAt).format("YYYY/MM/DD").toString()},Voice.prototype.makeAgeString=function(ageYears,ageMonths){return ageYears&&ageMonths?ageYears+"歳"+ageMonths+"ヶ月":ageYears?ageYears+"歳":"0歳"+ageMonths+"ヶ月"},Voice}();chavo.Voice=Voice}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var Voice=function(){function Voice(voice,likes){this.constructVoiceFromParseVoice(voice,likes)}return Voice.prototype.constructVoiceFromParseVoice=function(voice,likes){this.objectId=voice.id,this.description=voice.get("description"),this.tags=voice.get("tags"),this.speaker=voice.get("author"),this.age=this.makeAgeString(voice.get("ageYears"),voice.get("ageMonths")),this.ageYears=voice.get("ageYears"),this.ageMonths=voice.get("ageMonths"),this.gender=0===voice.get("gender")?"男の子":1===voice.get("gender")?"女の子":"",this.genderValue=voice.get("gender"),this.user=voice.get("user").get("username"),this.userObjectId=voice.get("user").id,this.icon=void 0===voice.get("user").get("iconUrl")?void 0===voice.get("icon")?null:voice.get("icon").url():voice.get("user").get("iconUrl"),this.like=likes.indexOf(voice.id)>=0?!0:!1,this.likeCount=voice.get("likeCount"),this.photoUrl=voice.get("photoUrl"),this.isPublic=voice.getACL().getPublicReadAccess(),this.createdAt=moment(voice.createdAt).format("YYYY/MM/DD").toString()},Voice.prototype.makeAgeString=function(ageYears,ageMonths){return ageYears&&ageMonths?ageYears+"歳"+ageMonths+"ヶ月":ageYears?ageYears+"歳":"0歳"+ageMonths+"ヶ月"},Voice}();chavo.Voice=Voice}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyApplyController=function(){function SettingsFamilyApplyController($scope,$rootScope,$state,$stateParams,cfpLoadingBar){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,console.log(this.$rootScope.targetChild)}return SettingsFamilyApplyController.$inject=["$scope","$rootScope","$state","$stateParams","cfpLoadingBar"],SettingsFamilyApplyController}();chavo.SettingsFamilyApplyController=SettingsFamilyApplyController}(chavo||(chavo={}));var chavo;!function(chavo){"use strict";var SettingsFamilyApplyController=function(){function SettingsFamilyApplyController($scope,$rootScope,$state,$stateParams,cfpLoadingBar){this.$scope=$scope,this.$rootScope=$rootScope,this.$state=$state,this.$stateParams=$stateParams,this.cfpLoadingBar=cfpLoadingBar,console.log(this.$rootScope.targetChild),this.initBirthday(),this.birthYears=new Array;for(var i=1900;i<=moment().year();i++)this.birthYears.push(i);for(this.birthMonths=[1,2,3,4,5,6,7,8,9,10,11,12],this.birthDates=new Array,i=1;31>=i;i++)this.birthDates.push(i)}return SettingsFamilyApplyController.$inject=["$scope","$rootScope","$state","$stateParams","cfpLoadingBar"],SettingsFamilyApplyController.prototype.saveChildData=function(){var _this=this;if(this.cfpLoadingBar.start(),this.$rootScope.targetChild.dispOrder>0){var ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild);query.equalTo("dispOrder",this.$rootScope.targetChild.dispOrder),query.first().then(function(child){return child.set("dispOrder",_this.$rootScope.targetChild.dispOrder),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message)}})}).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.$state.go("settings.children")})}else{var dispOrder=0;ParseChild=Parse.Object.extend("Child"),query=new Parse.Query(ParseChild),query.descending("dispOrder"),query.first({success:function(result){result&&result.get("dispOrder")&&(dispOrder=result.get("dispOrder"))},error:function(error){console.error("Error: "+error.code+" "+error.message),this.cfpLoadingBar.complete()}}).then(function(){var child=new ParseChild;return child.set("dispOrder",dispOrder+1),child.set("nickName",_this.$rootScope.targetChild?_this.$rootScope.targetChild.nickName:null),child.set("birthday",_this.getInputBirthday()),child.set("gender",+_this.$rootScope.targetChild.gender),child.setACL(new Parse.ACL(Parse.User.current())),child.save({error:function(child,error){console.log("Error: "+error.code+" "+error.message),this.cfpLoadingBar.complete()}})}).then(function(){console.log("ほぞんしました"),_this.cfpLoadingBar.complete(),_this.$state.go("settings.children")})}},SettingsFamilyApplyController.prototype.initBirthday=function(){this.$rootScope.targetChild.unableBirthday?(this.yearSelected=null,this.monthSelected=null,this.dateSelected=null):this.setBirthday()},SettingsFamilyApplyController.prototype.getInputBirthday=function(){return this.$rootScope.targetChild.unableBirthday?null:moment({year:this.yearSelected,months:this.monthSelected,date:this.dateSelected}).toDate()},SettingsFamilyApplyController.prototype.setBirthday=function(){var momentObj=this.$rootScope.targetChild&&this.$rootScope.targetChild.birthday?moment(this.$rootScope.targetChild.birthday):moment();this.yearSelected=momentObj.year(),this.monthSelected=momentObj.month(),this.dateSelected=momentObj.date()},SettingsFamilyApplyController}();chavo.SettingsFamilyApplyController=SettingsFamilyApplyController}(chavo||(chavo={})),angular.module("chavo").run(["$templateCache",function($templateCache){$templateCache.put("app/login/login.html",'<div class="col-sm-4 col-sm-offset-4" ng-controller="LoginController as login"><h1>ちゃぼ</h1><alert type="info" ng-show="$root.currentUser && !$root.currentUser.get(\'emailVerified\')">メールを送信しました。メールのURLクリック後、再度ログインしてください。</alert><div class="panel panel-default"><div class="panel-body"><h4>ログイン</h4><form class="form-horizontal" ng-show="!$root.currentUser || !$root.currentUser.get(\'emailVerified\')" name="loginForm" novalidate=""><div class="form-group"><div class="col-sm-12"><input type="text" ng-model="logInForm.username" class="form-control" id="login-username" name="login-username" placeholder="ユーザー名"></div></div><div class="form-group"><div class="col-sm-12"><input type="password" ng-model="logInForm.password" class="form-control" id="login-password" name="login-password" placeholder="パスワード"></div></div><div class="form-group"><div class="col-sm-12"><button class="btn btn-default" ng-click="login.logIn(logInForm)" ng-disabled="loginForm.email.$invalid">ログイン</button></div></div></form><div class="col-sm-12"><alert type="danger" ng-show="login.loginMessage">{{login.loginMessage}}</alert></div><div class="col-sm-12" id="resetPwPopoverContainer"><alert type="info" ng-show="login.showResetPwMessage">メールを送信しました。メールのURLをクリックしてパスワードを再設定してください。</alert><a popover-template="\'resetPwPopoverTemplate.html\'" popover-placement="right" popover-trigger="focus" role="button" tabindex="0">パスワードを忘れたときはこちら</a><script type="text/ng-template" id="resetPwPopoverTemplate.html"><div class="form-group"> <label>Email</label> <input type="email" ng-model="resetPwForm.email" class="form-control" id="reset-pw-email" name="reset-pw-email"> </div> <button class="btn btn-default" ng-click="login.requestPasswordReset(resetPwForm)" ng-disabled="resetPwForm.email.$invalid">送信</button></script></div></div><div class="panel-footer">または <button class="btn btn-default" ng-click="login.loginWithFacebook()">Facebookでログイン</button></div></div><a class="btn btn-default" ui-sref="signup">アカウントがない場合はここから新規登録</a></div>'),$templateCache.put("app/main/main.html",'<div ng-controller="MainController as main" class="container"><div ng-include="\'app/components/navbar/navbar.html\'"></div><div ng-include="\'app/components/tabmenu/tabmenu.html\'"></div><ui-view></ui-view></div>'),$templateCache.put("app/settings/settings.html",'<div class="container"><div ng-include="\'app/components/navbar/navbar.html\'"></div><row><div ng-include="\'app/settings/menu/settings.menu.html\'"></div><div ng-include="\'app/settings/content/settings.content.html\'"></div></row></div>'),$templateCache.put("app/signup/signup.html",'<div class="col-sm-4 col-sm-offset-4" ng-controller="SignupController as signup"><h1>ちゃぼ</h1><alert type="info" ng-show="$root.currentUser && !$root.currentUser.get(\'emailVerified\')">メールを送信しました。メールのURLクリック後、再度ログインしてください。</alert><div class="panel panel-default"><div class="panel-body"><h4>ユーザ登録</h4><form class="form-horizontal" ng-show="!$root.currentUser || !$root.currentUser.get(\'emailVerified\')" name="signUpForm" novalidate=""><div class="form-group"><div class="col-sm-12"><input type="text" ng-model="signUpForm.username" class="form-control" id="signup-username" name="signup-username" placeholder="ユーザー名"></div></div><div class="form-group"><div class="col-sm-12"><input type="email" ng-model="signUpForm.email" class="form-control" id="signup-email" name="signup-email" placeholder="メールアドレス"></div></div><div class="form-group"><div class="col-sm-12"><input type="password" ng-model="signUpForm.password" class="form-control" id="signup-password" name="signup-password" placeholder="パスワード"></div></div><div class="form-group"><div class="col-sm-12"><button class="btn btn-default" ng-click="signup.signUp(signUpForm)" ng-disabled="signUpForm.email.$invalid">ユーザ登録</button></div></div></form></div><div class="panel-footer">または <button class="btn btn-default" ng-click="signup.loginWithFacebook()">Facebookで登録・ログイン</button></div></div><a class="btn btn-default" ui-sref="login">アカウントをお持ちの場合はここからログイン</a></div>'),$templateCache.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-fixed-top navbar-default" ng-controller="NavbarController as navbar"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" ui-sref="home.all">ちゃぼ</a></div><div class="collapse navbar-collapse" id="navbar"><div ng-show="!$root.currentUser"><ul class="nav navbar-nav navbar-right"><li><a href="#" role="button" ui-sref="settings"><span class="glyphicon glyphicon-cog"></span></a></li><li dropdown=""><a dropdown-toggle="" data-toggle="dropdown" role="button"><span class="glyphicon glyphicon-chevron-down"></span></a><ul class="dropdown-menu"><li><div class="navbar-login"><div class="row"><div class="col-lg-12"><form class="hidden-xs"><div class="form-group"><input type="text" class="form-control input-sm" ng-model="navLoginForm.username" name="username" placeholder="Username" ng-click="$event.stopPropagation()"> <input type="password" class="form-control input-sm" ng-model="navLoginForm.password" name="password" placeholder="Password" ng-click="$event.stopPropagation()"></div><button type="button" class="btn btn-primary input-sm btn-outline" ng-click="navbar.logIn(navLoginForm)">ログイン</button></form><a ui-sref="login" class="btn btn-primary input-sm btn-outline visible-xs-block">ログイン</a></div></div></div></li><li class="divider"></li><li><div class="navbar-login navbar-login-session"><div class="row"><div class="col-lg-12"><p><a href="#" class="btn btn-danger btn-block btn-outline" ng-click="navbar.loginWithFacebook()">Facebookでログイン</a></p></div></div></div></li></ul></li></ul></div><div ng-show="$root.currentUser"><ul class="nav navbar-nav navbar-right"><li dropdown=""><a href="#" dropdown-toggle="" data-toggle="dropdown" role="button"><span class="badge">42</span></a><ul class="dropdown-menu"><li><div class="navbar-login"><div class="row"><div class="col-lg-12"><a ui-sref="settings.family_approval">かぞく申請が届いています。</a></div></div></div></li></ul></li><li><a role="button" ui-sref="settings"><span class="glyphicon glyphicon-cog"></span></a></li><li dropdown=""><a href="#" dropdown-toggle="" data-toggle="dropdown" role="button"><span class="glyphicon glyphicon-warning-sign text-danger" ng-show="!$root.currentUser.get(\'authData\').facebook && !$root.currentUser.get(\'emailVerified\')"></span> <span class="glyphicon glyphicon-user"></span> <strong>{{$root.currentUser.get(\'username\')}}</strong> <span class="glyphicon glyphicon-chevron-down"></span></a><ul class="dropdown-menu"><li><div class="navbar-login"><div class="row"><div class="col-lg-2"><div ng-style="{ \'background-image\': \'url(\' + $root.currentUser.get(\'iconUrl\') + \')\' }" class="img-circle icon-post"></div></div><div class="col-lg-10"><p class="text-left"><strong>{{$root.currentUser.get(\'username\')}}</strong></p><p class="text-left" ng-show="!$root.currentUser.get(\'authData\').facebook && !$root.currentUser.get(\'emailVerified\')"><alert type="danger">メールアドレスの確認が完了しておらず一部機能が利用できません。メールのURLをクリックして登録完了してください。<br><a class="alert-link" ng-click="navbar.fetchUser()">登録完了したらここをクリックして再読み込み</a></alert></p></div></div></div></li><li class="divider"></li><li><div class="navbar-login navbar-login-session"><div class="row"><div class="col-lg-12"><p><a href="#" class="btn btn-danger btn-block btn-outline" ng-click="navbar.logOut()">ログアウト</a></p></div></div></div></li></ul></li></ul><div ng-show=""></div></div></div></div></nav>'),$templateCache.put("app/components/tabmenu/tabmenu.html",'<div class="row" ng-controller="TabmenuController as tabmenu" id="tabmenu"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><tabs data="tabmenu.tabs" type="tabs" justified="true" template-url="app/components/tabmenu/tabs.html"></tabs></div></div>'),$templateCache.put("app/components/tabmenu/tabs.html",'<div><tabset class="tab-container" type="{{type}}" vertical="{{vertical}}" justified="{{justified}}"><tab class="tab" ng-repeat="tab in tabs" active="tab.active" disable="tab.disabled" ng-click="go(tab)"><tab-heading><span ng-bind-html="tab.heading"></span></tab-heading></tab></tabset></div>'),$templateCache.put("app/main/all/main.all.html",'<div ng-controller="MainAllController as main_all" class="row"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><div class="media-list"><div class="media panel panel-default" ng-repeat="voice in main_all.voices"><div class="media-left"><a href="#"><div ng-style="{ \'background-image\': \'url(\' + voice.icon + \')\' }" class="media-object img-circle icon-post"></div></a></div><div class="media-body"><div class="media-header"><span><small>{{ voice.user }}</small> <small>{{ voice.createdAt }}</small></span> <span class="pull-right"><span ng-click="main_all.toggleLike(voice)" id="like" ng-class="{ \'like-active\': voice.like }"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></span> <span id="like-count">{{ voice.likeCount }}</span> <span ng-show="{{voice.userObjectId === main_all.$rootScope.currentUser.id}}" dropdown="" class="dropdown"><span class="glyphicon glyphicon-option-horizontal cursor-pointer dropdown-toggle" dropdown-toggle=""></span><ul class="dropdown-menu dropdown-menu-right"><li><a ui-sref="home.compose({ voice: voice, voiceId: voice.objectId })">編集する</a></li><li><a ng-click="main_all.openDeletePostConfirmModal(voice)">削除する</a></li><script type="text/ng-template" id="deletePostConfirmModal.html"><div class="modal-body">この投稿を削除しますか？</div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="delete_post_modal.ok()">OK</button> <button class="btn btn-default" type="button" ng-click="delete_post_modal.cancel()">Cancel</button> </div></script></ul></span></span></div><p class="pre-line">{{ voice.description }}</p><p><a ng-repeat="tag in voice.tags" ui-sref="home.tag({ tag: tag })"><span class="badge tag-badge">{{ tag }}</span></a></p><p class="text-right"><small>{{ voice.speaker }} {{ voice.age }} {{ voice.gender }}</small></p><p ng-show="voice.photoUrl"><img ng-src="{{voice.photoUrl}}" class="img-responsive img-thumbnail"></p></div></div></div></div></div>'),$templateCache.put("app/main/compose/main.compose.html",'<div ng-controller="MainComposeController as main_compose" class="row"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><div ng-show="!$root.currentUser"><alert type="danger">投稿機能の利用にはログインが必要です。<a ui-sref="login" class="alert-link">ログインはこちらから</a></alert></div><div ng-show="$root.currentUser && !$root.currentUser.get(\'authData\').facebook && !$root.currentUser.get(\'emailVerified\')"><alert type="danger" close="">投稿機能の利用にはログインが必要です。メールアドレスの確認が完了していません。メールを確認してURLをクリックしてください。<br><a class="alert-link" ng-click="main_compose.fetchUser()">登録完了したらここをクリックして再読み込み</a></alert></div><div ng-show="$root.currentUser.get(\'authData\').facebook || $root.currentUser.get(\'emailVerified\')"><alert type="danger" ng-show="main_compose.alertMsg" close="">{{main_compose.alertMsg}}</alert><div class="panel panel-default"><div class="panel-body"><form name="formCompose"><fieldset ng-disabled="main_compose.disableInput"><div class="form-group" ng-class="{ \'has-error\': formCompose.description.$dirty && !main_compose.voice.description }"><textarea name="description" ng-model="main_compose.voice.description" class="form-control" rows="5" placeholder="こどもの名言・迷言、一発ネタ、何気ない一言、泣かされたセリフ、なんでも記録しよう！" required="">\n                </textarea></div><div class="form-group"><tags-input ng-model="main_compose.ngTags" add-on-paste="true" placeholder="カテゴリ・タグを追加" min-length="1" template="tag.html"><auto-complete source="main_compose.loadTags($query)" min-length="1"></auto-complete></tags-input><script type="text/ng-template" id="tag.html"><span class="">{{$getDisplayText()}}</span> <a class="remove-button" ng-click="$removeTag()">&#10006;</a></script></div><div ng-show="main_compose.voice.photoUrl"><img ng-src="{{main_compose.voice.photoUrl}}" class="img-responsive img-thumbnail"></div><input id="photo-selector" type="file"><alert type="danger" ng-if="main_compose.children.length <= 0">まだこどもが登録されていません。登録すると投稿のとき毎回入力する手間を省けます。<br><a ui-sref="settings.children">登録はこちらから</a></alert><div class="form-group">だれのセリフを記録しますか？<div class="btn-group btn-group-sm" dropdown="" is-open="main_compose.dropDownStatus.voiceAuthorIsOpen"><button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle="">{{ \'こどもを選択\' }} <span class="caret"></span></button><ul class="dropdown-menu"><li><a ng-click="main_compose.clearVoiceAuthor()">-- クリアする --</a></li><li ng-repeat="child in main_compose.children"><a ng-click="main_compose.onSelectVoiceAuthor(child)">{{ child.nickName || \'（未登録）\'}} <span ng-if="child.age">{{child.age}}</span> <span ng-if="child.gender === 0">男の子</span> <span ng-if="child.gender === 1">女の子</span></a></li></ul></div></div><div class="form-horizontal"><div class="form-group"><input placeholder="ニックネーム" type="text" class="form-control input-sm" ng-model="main_compose.voiceAuthor.nickName"></div><div class="form-group"><div class="form-inline"><div class="input-group"><input id="voice-author-age-years" type="text" class="form-control input-sm text-right" ng-model="main_compose.voiceAuthor.ageYears"><div class="input-group-addon">歳</div></div><div class="input-group"><input id="voice-author-age-months" type="text" class="form-control input-sm text-right" ng-model="main_compose.voiceAuthor.ageMonths"><div class="input-group-addon">ヶ月</div></div><select class="form-control input-sm" ng-model="main_compose.voiceAuthor.gender" ng-options="gender.value as gender.label for gender in main_compose.genderList"><option disabled="true" value="">性別</option></select></div></div><div class="form-group"><toggle-switch ng-model="main_compose.voiceIsPublic" on-label="公開" off-label="非公開"></toggle-switch><button type="button" class="btn btn-primary pull-right btn-outline" ng-click="main_compose.submit()" ng-disabled="!main_compose.voice.description"><span class="glyphicon glyphicon-send">送信</span></button></div></div></fieldset></form></div></div></div></div></div>'),$templateCache.put("app/main/myposts/main.myposts.html",'<div ng-controller="MainMyPostsController as main_myposts" class="row"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><div class="media-list"><div class="media panel panel-default" ng-repeat="voice in main_myposts.voices"><div class="media-left"><a href="#"><div ng-style="{ \'background-image\': \'url(\' + voice.icon + \')\' }" class="media-object img-circle icon-post"></div></a></div><div class="media-body"><div class="media-header"><span><small>{{ voice.user }}</small> <small>{{ voice.createdAt }}</small></span> <span class="pull-right"><span ng-click="main_myposts.toggleLike(voice)" id="like" ng-class="{ \'like-active\': voice.like }"><span class="glyphicon glyphicon-heart cursor-pointer" aria-hidden="true"></span></span> <span id="like-count">{{ voice.likeCount }}</span> <span dropdown="" class="dropdown"><span class="glyphicon glyphicon-option-horizontal cursor-pointer dropdown-toggle" dropdown-toggle=""></span><ul class="dropdown-menu dropdown-menu-right"><li><a ui-sref="home.compose({ voice: voice })">編集する</a></li><li><a ng-click="main_myposts.openDeletePostConfirmModal(voice)">削除する</a></li><script type="text/ng-template" id="deletePostConfirmModal.html"><div class="modal-body">この投稿を削除しますか？</div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="delete_post_modal.ok()">OK</button> <button class="btn btn-default" type="button" ng-click="delete_post_modal.cancel()">Cancel</button> </div></script></ul></span></span></div><p class="pre-line">{{ voice.description }}</p><p class="text-right"><small>{{ voice.speaker }} {{ voice.age }} {{ voice.gender }}</small></p><p ng-show="voice.photoUrl"><img ng-src="{{voice.photoUrl}}" class="img-responsive img-thumbnail"></p></div></div></div></div></div>'),$templateCache.put("app/main/tag/main.tag.html",'<div ng-controller="MainTagController as main_tag" class="row"><div class="col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3"><div class="panel panel-default"><div class="panel-heading">人気のタグ</div><div class="panel-body"><a ng-repeat="sampleTag in main_tag.sampleTagList" ui-sref="home.tag({ tag: sampleTag })"><span class="badge tag-badge">{{ sampleTag }}</span></a></div></div><div class="media-list"><div class="media panel panel-default" ng-repeat="voice in main_tag.voices"><div class="media-left"><a href="#"><div ng-style="{ \'background-image\': \'url(\' + voice.icon + \')\' }" class="media-object img-circle icon-post"></div></a></div><div class="media-body"><div class="media-header"><span><small>{{ voice.user }}</small> <small>{{ voice.createdAt }}</small></span> <span class="pull-right"><span ng-click="main_tag.toggleLike(voice)" id="like" ng-class="{ \'like-active\': voice.like }"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></span> <span id="like-count">{{ voice.likeCount }}</span> <span ng-show="{{voice.userObjectId === main_tag.$rootScope.currentUser.id}}" dropdown="" class="dropdown"><span class="glyphicon glyphicon-option-horizontal cursor-pointer dropdown-toggle" dropdown-toggle=""></span><ul class="dropdown-menu dropdown-menu-right"><li><a ui-sref="home.compose({ voice: voice, voiceId: voice.objectId })">編集する</a></li><li><a ng-click="main_tag.openDeletePostConfirmModal(voice)">削除する</a></li><script type="text/ng-template" id="deletePostConfirmModal.html"><div class="modal-body">この投稿を削除しますか？</div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="delete_post_modal.ok()">OK</button> <button class="btn btn-default" type="button" ng-click="delete_post_modal.cancel()">Cancel</button> </div></script></ul></span></span></div><p class="pre-line">{{ voice.description }}</p><p><a ng-repeat="tag in voice.tags" ui-sref="home.tag({ tag: tag })"><span class="badge tag-badge">{{ tag }}</span></a></p><p class="text-right"><small>{{ voice.speaker }} {{ voice.age }} {{ voice.gender }}</small></p><p ng-show="voice.photoUrl"><img ng-src="{{voice.photoUrl}}" class="img-responsive img-thumbnail"></p></div></div></div></div></div>'),$templateCache.put("app/settings/content/settings.content.html",'<div class="col-sm-6 col-md-6" ng-controller="SettingsContentController as settings_content"><ui-view></ui-view></div>'),$templateCache.put("app/settings/menu/settings.menu.html",'<div ng-controller="SettingsMenuController as settings_menu" class="col-sm-2 col-md-2 col-sm-offset-2 col-md-offset-2"><div class="list-group"><a class="list-group-item" ng-repeat="menuItem in settings_menu.menuItems" ui-sref="{{ menuItem.route }}" ui-sref-active="active">{{ menuItem.title }}</a></div></div>'),$templateCache.put("app/settings/content/child/settings.child.html",'<div ng-controller="SettingsChildController as settings_child" class="panel panel-default"><div class="panel-body"><form class="form-horizontal"><div class="form-group"><label for="nickName" class="col-sm-3 control-label">ニックネーム</label><div class="col-sm-9"><input type="text" class="form-control" id="nickName" placeholder="ニックネーム" ng-model="settings_child.$rootScope.targetChild.nickName"></div></div><div class="form-group"><label class="col-sm-3 control-label">生年月日</label><div class="col-sm-9 form-inline"><select class="form-control" ng-model="settings_child.yearSelected" ng-options="year for year in settings_child.birthYears" ng-disabled="settings_child.$rootScope.targetChild.unableBirthday"><option value="">--</option></select>年<select class="form-control" ng-model="settings_child.monthSelected" ng-options="month for month in settings_child.birthMonths" ng-disabled="settings_child.$rootScope.targetChild.unableBirthday"><option value="">--</option></select>月<select class="form-control" ng-model="settings_child.dateSelected" ng-options="date for date in settings_child.birthDates" ng-disabled="settings_child.$rootScope.targetChild.unableBirthday"><option value="">--</option></select>日 <span id="unableBirthday"><input type="checkbox" ng-model="settings_child.$rootScope.targetChild.unableBirthday" ng-change="settings_child.initBirthday()"> 登録しない</span></div></div><div class="form-group"><label class="col-sm-3 control-label">性別</label><div class="col-sm-9"><label class="radio-inline"><input type="radio" name="gender" id="male" value="0" ng-model="settings_child.$rootScope.targetChild.gender"> 男の子</label> <label class="radio-inline"><input type="radio" name="gender" id="femail" value="1" ng-model="settings_child.$rootScope.targetChild.gender"> 女の子</label> <label class="radio-inline"><input type="radio" name="gender" id="none" value="2" ng-model="settings_child.$rootScope.targetChild.gender"> その他・登録しない</label></div></div><button type="button" class="btn btn-primary pull-right btn-outline" ng-click="settings_child.saveChildData()">保存</button></form></div></div>'),$templateCache.put("app/settings/content/children/settings.children.html",'<div ng-controller="SettingsChildrenController as settings_children"><div class="list-group"><div class="list-group-item text-right"><a class="btn btn-primary btn-outline" ng-click="settings_children.go(null)"><i class="fa fa-user-plus">追加</i></a></div><a ng-click="settings_children.go(child)" class="list-group-item" ng-repeat="child in settings_children.children"><span>{{child.nickName || \'（未登録）\'}}</span><div class="pull-right"><span ng-if="child.ageYears">{{ child.ageYears + \'歳\' }}</span> <span ng-if="child.ageMonths">{{ child.ageMonths + \'ヶ月\' }}</span> <span ng-if="child.gender === 0">男の子</span> <span ng-if="child.gender === 1">女の子</span></div></a></div></div>'),$templateCache.put("app/settings/content/family/settings.family.html",'<div ng-controller="SettingsFamilyController as settings_family"><div class="panel panel-default"><div class="panel-heading">かぞく一覧 <span class="pull-right"><a class="btn btn-primary btn-outline btn-xs" ui-sref="settings.family_application"><i class="fa fa-user-plus">追加</i></a></span></div><div class="list-group"><a ng-click="settings_family.go(familyMember)" class="list-group-item" ng-repeat="familyMember in settings_family.familyMembers"><div class="media-left"><div ng-style="{ \'background-image\': \'url(\' + familyMember.icon + \')\' }" class="img-circle icon-post"></div></div><div class="media-body"><h5>{{ familyMember.username }}</h5></div></a></div></div><div class="panel panel-default"><div class="panel-heading">かぞく申請中のユーザー</div><div class="list-group"><a ng-click="settings_family.go(familyMember)" class="list-group-item" ng-repeat="familyApp in settings_family.familyApps"><div class="media-left"><div ng-style="{ \'background-image\': \'url(\' + familyApp.toUserIconUrl + \')\' }" class="img-circle icon-post"></div></div><div class="media-body"><h5>{{ familyApp.toUserId }}</h5></div></a></div></div></div>'),$templateCache.put("app/settings/content/family_application/settings.family_application.html",'<div ng-controller="SettingsFamilyApplicationController as settings_family_application" class="panel panel-default"><div class="panel-heading">かぞく申請</div><div class="panel-body"><alert type="info">かぞく申請して相手に承認されるとかぞくとして登録されます。登録済みのこどもの設定を共有できたりおたがいの非公開の投稿を見られるようになります。</alert><form class="form-horizontal"><div class="form-group"><label for="nickName" class="col-sm-3 control-label">ユーザーID</label><div class="col-sm-9"><tags-input ng-model="settings_family_application.ngTags" add-on-paste="true" placeholder="かぞく申請したいユーザーIDを入力" min-length="1" min-tags="1" max-tags="1" add-from-autocomplete-only="true" debounce-delay="0" template="tag.html"><auto-complete source="settings_family_application.loadUser($query)" template="suggest.html" min-length="1"></auto-complete></tags-input><script type="text/ng-template" id="tag.html"><span class="">{{ $getDisplayText() }}</span> <a class="remove-button" ng-click="$removeTag()">&#10006;</a></script><script type="text/ng-template" id="suggest.html"><div class=""> <div class="media-left"> <div ng-style="{ \'background-image\': \'url(\' + data.iconUrl + \')\' }" class="img-circle icon-post"> </div> </div> <div class="media-body"><h4>{{ $getDisplayText() }}</h4></div> </div></script></div></div><button type="button" class="btn btn-primary pull-right btn-outline" ng-click="settings_family_application.apply()">このユーザーにかぞく申請する</button></form></div></div>'),$templateCache.put("app/settings/content/family_approval/settings.family_approval.html",'<div ng-controller="SettingsFamilyApprovalController as settings_family_approval" class="panel panel-default"><div class="panel-heading">かぞく承認</div><div class="panel-body"><alert type="info">かぞく申請して相手に承認されるとかぞくとして登録されます。登録済みのこどもの設定を共有できたりおたがいの非公開の投稿を見られるようになります。</alert></div><ul class="list-group"><li ng-repeat="familyApplication in settings_family_approval.familyApplicationList" class="list-group-item"><div class="media-left"><div ng-style="{ \'background-image\': \'url(\' + familyApplication.fromUserIconUrl + \')\' }" class="img-circle icon-post"></div></div><div class="media-body"><h5>{{ familyApplication.fromUserId }}</h5><button class="btn btn-primary btn-outline pull-right" ng-click="settings_family_approval.openConfirmModal(\'reject\', familyApplication)">否認する</button> <button class="btn btn-primary btn-outline pull-right" id="btn-family-approve" ng-click="settings_family_approval.openConfirmModal(\'approve\', familyApplication)">承認する</button><script type="text/ng-template" id="rejectOrApproveConfirmModal.html"><div class="modal-body">{{ rejecrt_apprive_modal.familyApplication.fromUserId }} さんの申請を{{ rejecrt_apprive_modal.modeDispText }}しますか？</div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="rejecrt_apprive_modal.process()">{{ rejecrt_apprive_modal.modeDispText }}する</button> <button class="btn btn-default" type="button" ng-click="rejecrt_apprive_modal.cancel()">キャンセル</button> </div></script></div></li></ul></div>'),$templateCache.put("app/settings/content/profile/settings.profile.html",'<div class="panel panel-default" ng-controller="SettingsProfileController as settings_profile"><div class="panel-body"><form class="form-horizontal"><fieldset ng-disabled="settings_profile.disableInput"><div ng-style="{ \'background-image\': \'url(\' + settings_profile.profile.icon + \')\' }" class="img-thumbnail profile-icon"></div><input id="photo-selector" type="file"><div class="form-group"><label for="username" class="col-sm-3 control-label">ユーザ名</label><div class="col-sm-9"><input type="text" class="form-control" id="username" placeholder="ユーザ名" ng-model="settings_profile.profile.username"></div></div><div class="form-group"><label for="email" class="col-sm-3 control-label">メールアドレス</label><div class="col-sm-9"><input type="text" class="form-control" id="email" placeholder="メールアドレス" ng-model="settings_profile.profile.email"></div></div><div class="form-group"><label for="password" class="col-sm-3 control-label">パスワード</label><div class="col-sm-9"><input type="text" class="form-control" id="password" placeholder="パスワード（変更するときのみ入力）" ng-model="settings_profile.profile.password"></div></div><button type="button" class="btn btn-primary pull-right btn-outline" ng-click="settings_profile.saveProfile()"><i class="fa fa-user-plus">保存</i></button></fieldset></form></div></div>')
}]);